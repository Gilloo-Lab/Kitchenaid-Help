<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistant Réparation KitchenAid</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://unpkg.com/flowbite@1.5.3/dist/flowbite.min.css" rel="stylesheet">
    <script src="https://unpkg.com/flowbite@1.5.3/dist/flowbite.js"></script>
    <style>
        :root {
            --primary-color: #5D5CDE;
            --primary-dark: #4b4ab2;
            --kitchenaid-red: #C41230;
            --kitchenaid-black: #231F20;
            --kitchenaid-light: #F8F5F2;
        }
        
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #181818;
                --text-color: #F8F5F2;
                --card-bg: #2d2d2d;
                --border-color: #3d3d3d;
            }
        }
        
        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #FFFFFF;
                --text-color: #231F20;
                --card-bg: #F8F5F2;
                --border-color: #e5e5e5;
            }
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            background-color: var(--kitchenaid-red);
            color: white;
            transition: background-color 0.2s;
        }
        
        .btn-primary:hover {
            background-color: #a30f27;
        }
        
        .btn-secondary {
            background-color: var(--primary-color);
            color: white;
            transition: background-color 0.2s;
        }
        
        .btn-secondary:hover {
            background-color: var(--primary-dark);
        }
        
        .symptom-checkbox:checked + label {
            border-color: var(--kitchenaid-red);
            background-color: rgba(196, 18, 48, 0.1);
        }
        
        .step {
            opacity: 0;
            transform: translateY(10px);
            animation: fadeIn 0.5s forwards;
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--kitchenaid-red);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (prefers-color-scheme: dark) {
            .loading-spinner {
                border: 4px solid rgba(255, 255, 255, 0.1);
                border-top: 4px solid var(--kitchenaid-red);
            }
        }
        
        .model-image {
            max-width: 100%;
            height: auto;
            margin: 0 auto;
            display: block;
        }
        
        .svg-container {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 150px;
        }
        
        /* Print styles */
        @media print {
            body {
                background-color: white;
                color: black;
                font-size: 12pt;
            }
            
            .container {
                max-width: 100%;
                margin: 0;
                padding: 0;
            }
            
            .print-hide {
                display: none !important;
            }
            
            .print-show {
                display: block !important;
            }
            
            .card {
                border: 1px solid #ddd;
                padding: 1cm;
                box-shadow: none;
                break-inside: avoid;
                margin-bottom: 1cm;
            }
            
            header {
                text-align: center;
                margin-bottom: 1cm;
            }
            
            h1, h2, h3 {
                page-break-after: avoid;
            }
            
            img, svg {
                max-width: 500px !important;
                margin: 0 auto;
            }
            
            p, li {
                page-break-inside: avoid;
            }
            
            footer {
                margin-top: 1cm;
                font-size: 9pt;
                text-align: center;
                border-top: 1px solid #ddd;
                padding-top: 0.5cm;
            }
        }
        
        .print-only {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold mb-2" style="color: var(--kitchenaid-red);">Assistant Réparation KitchenAid</h1>
            <p class="text-lg">Diagnostiquez et réparez votre robot de cuisine</p>
        </header>

        <main>
            <!-- Step 1: Select Model -->
            <div id="step-model" class="step mb-8">
                <h2 class="text-2xl font-semibold mb-4">Étape 1: Choisissez votre modèle</h2>
                
                <div class="mb-6 text-center">
                    <button id="view-faq-from-home" class="inline-flex items-center px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Questions fréquentes (FAQ)
                    </button>
                </div>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="card p-4 cursor-pointer model-card" data-model="artisan">
                        <div class="svg-container" style="height: 150px;">
                            <svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg" class="model-image">
                                <path d="M80,130 L120,130 L125,50 L115,40 C115,40 105,35 100,35 C95,35 85,40 85,40 L75,50 Z" fill="#ccc" stroke="#333" stroke-width="2"/>
                                <ellipse cx="100" cy="35" rx="20" ry="5" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M75,50 C60,60 60,80 80,100" fill="none" stroke="#333" stroke-width="2"/>
                                <path d="M125,50 C140,60 140,80 120,100" fill="none" stroke="#333" stroke-width="2"/>
                                <rect x="85" y="80" width="30" height="20" rx="5" fill="#eee" stroke="#333" stroke-width="1"/>
                                <circle cx="130" cy="70" r="10" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M130,60 L135,40 L145,40 L140,60 Z" fill="#ddd" stroke="#333" stroke-width="1"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-center mt-2">Artisan</h3>
                        <p class="text-sm text-center opacity-75">Série 5KSM</p>
                    </div>
                    <div class="card p-4 cursor-pointer model-card" data-model="classic">
                        <div class="svg-container" style="height: 150px;">
                            <svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg" class="model-image">
                                <path d="M80,130 L120,130 L125,50 L115,40 C115,40 105,35 100,35 C95,35 85,40 85,40 L75,50 Z" fill="#ccc" stroke="#333" stroke-width="2"/>
                                <ellipse cx="100" cy="35" rx="20" ry="5" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M75,50 C60,60 60,80 80,100" fill="none" stroke="#333" stroke-width="2"/>
                                <path d="M125,50 C140,60 140,80 120,100" fill="none" stroke="#333" stroke-width="2"/>
                                <rect x="85" y="80" width="30" height="20" rx="5" fill="#eee" stroke="#333" stroke-width="1"/>
                                <circle cx="130" cy="70" r="10" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M130,60 L135,40 L145,40 L140,60 Z" fill="#ddd" stroke="#333" stroke-width="1"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-center mt-2">Classic</h3>
                        <p class="text-sm text-center opacity-75">Série K45</p>
                    </div>
                    <div class="card p-4 cursor-pointer model-card" data-model="heavy-duty">
                        <div class="svg-container" style="height: 150px;">
                            <svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg" class="model-image">
                                <path d="M80,130 L120,130 L125,50 L115,40 C115,40 105,35 100,35 C95,35 85,40 85,40 L75,50 Z" fill="#ccc" stroke="#333" stroke-width="2"/>
                                <ellipse cx="100" cy="35" rx="20" ry="5" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M75,50 C60,60 60,80 80,100" fill="none" stroke="#333" stroke-width="2"/>
                                <path d="M125,50 C140,60 140,80 120,100" fill="none" stroke="#333" stroke-width="2"/>
                                <rect x="85" y="80" width="30" height="20" rx="5" fill="#eee" stroke="#333" stroke-width="1"/>
                                <circle cx="130" cy="70" r="10" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M130,60 L135,40 L145,40 L140,60 Z" fill="#ddd" stroke="#333" stroke-width="1"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-center mt-2">Heavy Duty</h3>
                        <p class="text-sm text-center opacity-75">Série 5KPM</p>
                    </div>
                    
                    <!-- Nouveau modèle: Mini -->
                    <div class="card p-4 cursor-pointer model-card" data-model="mini">
                        <div class="svg-container" style="height: 150px;">
                            <svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg" class="model-image">
                                <path d="M80,130 L120,130 L125,50 L115,40 C115,40 105,35 100,35 C95,35 85,40 85,40 L75,50 Z" fill="#ccc" stroke="#333" stroke-width="2"/>
                                <ellipse cx="100" cy="35" rx="20" ry="5" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M75,50 C60,60 60,80 80,100" fill="none" stroke="#333" stroke-width="2"/>
                                <path d="M125,50 C140,60 140,80 120,100" fill="none" stroke="#333" stroke-width="2"/>
                                <rect x="85" y="80" width="30" height="20" rx="5" fill="#eee" stroke="#333" stroke-width="1"/>
                                <circle cx="130" cy="70" r="10" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M130,60 L135,40 L145,40 L140,60 Z" fill="#ddd" stroke="#333" stroke-width="1"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-center mt-2">Mini</h3>
                        <p class="text-sm text-center opacity-75">Série 5KSM3311X</p>
                    </div>
                    
                    <!-- Nouveau modèle: Professional -->
                    <div class="card p-4 cursor-pointer model-card" data-model="professional">
                        <div class="svg-container" style="height: 150px;">
                            <svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg" class="model-image">
                                <path d="M80,130 L120,130 L125,50 L115,40 C115,40 105,35 100,35 C95,35 85,40 85,40 L75,50 Z" fill="#ccc" stroke="#333" stroke-width="2"/>
                                <ellipse cx="100" cy="35" rx="20" ry="5" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M75,50 C60,60 60,80 80,100" fill="none" stroke="#333" stroke-width="2"/>
                                <path d="M125,50 C140,60 140,80 120,100" fill="none" stroke="#333" stroke-width="2"/>
                                <rect x="85" y="80" width="30" height="20" rx="5" fill="#eee" stroke="#333" stroke-width="1"/>
                                <circle cx="130" cy="70" r="10" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M130,60 L135,40 L145,40 L140,60 Z" fill="#ddd" stroke="#333" stroke-width="1"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-center mt-2">Professional</h3>
                        <p class="text-sm text-center opacity-75">Série 5KSM7990X</p>
                    </div>
                    
                    <!-- Nouveau modèle: Commercial -->
                    <div class="card p-4 cursor-pointer model-card" data-model="commercial">
                        <div class="svg-container" style="height: 150px;">
                            <svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg" class="model-image">
                                <path d="M80,130 L120,130 L125,50 L115,40 C115,40 105,35 100,35 C95,35 85,40 85,40 L75,50 Z" fill="#ccc" stroke="#333" stroke-width="2"/>
                                <ellipse cx="100" cy="35" rx="20" ry="5" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M75,50 C60,60 60,80 80,100" fill="none" stroke="#333" stroke-width="2"/>
                                <path d="M125,50 C140,60 140,80 120,100" fill="none" stroke="#333" stroke-width="2"/>
                                <rect x="85" y="80" width="30" height="20" rx="5" fill="#eee" stroke="#333" stroke-width="1"/>
                                <circle cx="130" cy="70" r="10" fill="#ddd" stroke="#333" stroke-width="1"/>
                                <path d="M130,60 L135,40 L145,40 L140,60 Z" fill="#ddd" stroke="#333" stroke-width="1"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-center mt-2">Commercial</h3>
                        <p class="text-sm text-center opacity-75">Série 8QC</p>
                    </div>
                </div>
            </div>

            <!-- Step 2: Select Symptoms -->
            <div id="step-symptoms" class="step mb-8 hidden">
                <h2 class="text-2xl font-semibold mb-4">Étape 2: Quels symptômes constatez-vous?</h2>
                <p class="mb-4">Sélectionnez tous les symptômes que vous observez :</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="relative">
                        <input type="checkbox" id="symptom1" class="hidden symptom-checkbox" value="bruit-anormal">
                        <label for="symptom1" class="card p-4 flex items-center cursor-pointer border-2 border-transparent">
                            <span class="flex-1">Bruits anormaux (grincements, cliquetis)</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="symptom2" class="hidden symptom-checkbox" value="ne-demarre-pas">
                        <label for="symptom2" class="card p-4 flex items-center cursor-pointer border-2 border-transparent">
                            <span class="flex-1">Le robot ne démarre pas</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="symptom3" class="hidden symptom-checkbox" value="tete-instable">
                        <label for="symptom3" class="card p-4 flex items-center cursor-pointer border-2 border-transparent">
                            <span class="flex-1">La tête du robot est instable ou tombe</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="symptom4" class="hidden symptom-checkbox" value="accessoire-ne-tourne-pas">
                        <label for="symptom4" class="card p-4 flex items-center cursor-pointer border-2 border-transparent">
                            <span class="flex-1">L'accessoire ne tourne pas correctement</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="symptom5" class="hidden symptom-checkbox" value="surchauffe">
                        <label for="symptom5" class="card p-4 flex items-center cursor-pointer border-2 border-transparent">
                            <span class="flex-1">Surchauffe du moteur</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="symptom6" class="hidden symptom-checkbox" value="fuite-huile">
                        <label for="symptom6" class="card p-4 flex items-center cursor-pointer border-2 border-transparent">
                            <span class="flex-1">Fuite d'huile</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="symptom7" class="hidden symptom-checkbox" value="vitesse-irreguliere">
                        <label for="symptom7" class="card p-4 flex items-center cursor-pointer border-2 border-transparent">
                            <span class="flex-1">Vitesse irrégulière</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="symptom8" class="hidden symptom-checkbox" value="melange-inadequat">
                        <label for="symptom8" class="card p-4 flex items-center cursor-pointer border-2 border-transparent">
                            <span class="flex-1">Mélange inadéquat (ne mélange pas tous les ingrédients)</span>
                        </label>
                    </div>
                </div>
                
                <div class="flex justify-between">
                    <button id="back-to-model" class="btn-secondary px-6 py-2 rounded-lg">Retour</button>
                    <button id="diagnose-button" class="btn-primary px-6 py-2 rounded-lg">Diagnostiquer</button>
                </div>
            </div>

            <!-- Step 3: Diagnosis Results -->
            <div id="step-diagnosis" class="step mb-8 hidden">
                <h2 class="text-2xl font-semibold mb-4">Diagnostic de votre KitchenAid</h2>
                
                <div id="loading" class="text-center py-8 hidden">
                    <div class="loading-spinner"></div>
                    <p class="mt-4">Analyse en cours...</p>
                </div>
                
                <div id="diagnosis-result" class="card p-6">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-xl font-medium">Problème identifié:</h3>
                    </div>
                    <div id="model-info" class="text-sm text-gray-600 dark:text-gray-400 mb-3 print-only print-show"></div>
                    <p id="problem-description" class="mb-4"></p>
                    
                    <h3 class="text-xl font-medium mb-3">Guide de réparation:</h3>
                    <div id="repair-steps" class="space-y-4">
                        <!-- Steps will be inserted here -->
                    </div>
                    
                    <div id="repair-image" class="mt-6">
                        <!-- SVG illustration will be inserted here -->
                    </div>
                </div>
                
                <div class="mt-6 print-hide">
                    <button id="back-to-symptoms" class="btn-secondary px-6 py-2 rounded-lg">Modifier les symptômes</button>
                    <button id="restart-button" class="btn-primary px-6 py-2 rounded-lg ml-4">Recommencer</button>
                    <button id="view-faq-button" class="btn-secondary px-6 py-2 rounded-lg ml-4">Consulter la FAQ</button>
                </div>
            </div>
            
            <!-- Step 4: FAQ -->
            <div id="step-faq" class="step mb-8 hidden">
                <h2 class="text-2xl font-semibold mb-4">Questions fréquentes (FAQ)</h2>
                
                <div class="mb-4">
                    <p class="mb-4">Retrouvez les réponses aux questions les plus fréquentes sur les robots KitchenAid :</p>
                </div>
                
                <div class="space-y-4 mb-6">
                    <!-- FAQ Accordion -->
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Comment nettoyer correctement mon robot KitchenAid ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Débranchez toujours votre robot avant de le nettoyer.</li>
                                <li>Pour le corps du robot, utilisez un chiffon doux humide avec un peu de savon doux. N'immergez jamais le robot dans l'eau.</li>
                                <li>Le bol en acier inoxydable, le fouet, le crochet pétrisseur et le batteur plat peuvent être lavés au lave-vaisselle (panier supérieur recommandé).</li>
                                <li>Pour les taches tenaces sur le bol, utilisez un nettoyant doux non abrasif.</li>
                                <li>N'utilisez jamais de nettoyants abrasifs, de tampons à récurer ou de laine d'acier sur votre robot.</li>
                                <li>Pour les accessoires avec revêtement, évitez le lave-vaisselle et lavez-les à la main pour préserver leur durabilité.</li>
                            </ol>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Quelle est la durée de vie moyenne d'un robot KitchenAid ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p>Les robots KitchenAid sont connus pour leur durabilité exceptionnelle. Avec un entretien approprié, ils peuvent facilement durer 15 à 30 ans, voire plus. De nombreux utilisateurs possèdent des robots KitchenAid qui fonctionnent encore parfaitement après plusieurs décennies. La conception robuste avec des engrenages en métal et des moteurs puissants contribue à cette longévité.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Mon robot fait un bruit de cliquetis, est-ce normal ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Un léger bruit de cliquetis peut être normal, surtout lors du démarrage ou du changement de vitesse. Cependant, un bruit fort ou persistant indique généralement un problème :</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Vérifiez si un accessoire touche le bol. Ajustez la hauteur du batteur si nécessaire.</li>
                                <li>Assurez-vous que le bol est correctement verrouillé en place.</li>
                                <li>Des engrenages usés peuvent causer un bruit métallique. Dans ce cas, une lubrification ou un remplacement peut être nécessaire.</li>
                                <li>Si le robot est ancien ou peu utilisé, un léger bruit initial peut être normal et disparaître après quelques utilisations.</li>
                            </ul>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Comment régler la hauteur du batteur ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Débranchez d'abord votre robot KitchenAid.</li>
                                <li>Inclinez la tête du robot vers l'arrière ou relevez le bol (selon votre modèle).</li>
                                <li>Trouvez la vis de réglage de la hauteur. Sur la plupart des modèles, elle est située à la base de la tête du robot, là où elle se connecte au socle.</li>
                                <li>Pour abaisser le batteur (le rapprocher du bol), tournez la vis de réglage dans le sens horaire.</li>
                                <li>Pour élever le batteur (l'éloigner du bol), tournez la vis dans le sens antihoraire.</li>
                                <li>Le réglage idéal est lorsque le batteur plat peut passer juste au-dessus du fond du bol sans le toucher. Utilisez une pièce de monnaie comme jauge : le batteur devrait tout juste passer au-dessus d'une pièce placée au fond du bol.</li>
                                <li>Après l'ajustement, vérifiez en faisant fonctionner brièvement le robot à basse vitesse.</li>
                            </ol>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Quelle vitesse utiliser pour quelles préparations ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Vitesse 1 (Remuer)</strong> : Démarrage de toutes les préparations, mélange lent d'ingrédients secs, ajout d'ingrédients pendant le mélange.</li>
                                <li><strong>Vitesse 2 (Mélanger lentement)</strong> : Mélange lent de pâtes épaisses, pétrissage des pâtes à levure, début d'écrasement de pommes de terre.</li>
                                <li><strong>Vitesse 4 (Mélanger, Battre)</strong> : Mélange de pâtes moyennement épaisses, préparation de gâteaux et cookies.</li>
                                <li><strong>Vitesse 6 (Battre, Crémer)</strong> : Battage à vitesse moyenne à élevée, crémage du beurre et du sucre.</li>
                                <li><strong>Vitesse 8 (Battre rapidement)</strong> : Fouettage de crème, blancs d'œufs et glaçages bouillis.</li>
                                <li><strong>Vitesse 10 (Fouetter rapidement)</strong> : Fouettage de petites quantités de crème et blancs d'œufs, finition des purées de pommes de terre.</li>
                            </ul>
                            <p class="mt-3"><em>Conseil</em> : Commencez toujours à la vitesse la plus basse puis augmentez progressivement pour éviter les éclaboussures.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Comment savoir si mon robot a besoin d'être lubrifié ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Les signes indiquant que votre robot KitchenAid a besoin d'être lubrifié sont :</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Bruit de grincement ou de crissement pendant le fonctionnement</li>
                                <li>Fonctionnement plus difficile ou plus lent qu'auparavant</li>
                                <li>Surchauffe inhabituelle</li>
                                <li>Difficulté à changer de vitesse</li>
                                <li>Odeur de brûlé ou d'huile surchauffée</li>
                            </ul>
                            <p class="mt-3">La lubrification est généralement recommandée tous les 2 à 5 ans selon l'utilisation. Pour les robots professionnels ou à usage intensif, une lubrification plus fréquente peut être nécessaire. Utilisez uniquement de la graisse alimentaire approuvée pour les robots KitchenAid.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Comment changer les accessoires sans endommager mon robot ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Pour changer les accessoires de votre robot KitchenAid en toute sécurité :</p>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Assurez-vous que le robot est éteint et débranché avant de changer les accessoires.</li>
                                <li>Inclinez la tête du robot vers l'arrière ou relevez le bol selon votre modèle.</li>
                                <li>Pour retirer un accessoire, poussez-le vers le haut et tournez-le vers la gauche pour le désengager de la broche.</li>
                                <li>Pour installer un nouvel accessoire, alignez la fente de l'accessoire avec la goupille sur l'arbre du batteur.</li>
                                <li>Poussez l'accessoire vers le haut et tournez-le vers la droite pour le verrouiller en place.</li>
                                <li>N'utilisez jamais la force excessive qui pourrait endommager les mécanismes.</li>
                                <li>Assurez-vous que l'accessoire est bien fixé avant d'utiliser le robot.</li>
                            </ol>
                            <p class="mt-3"><em>Note</em> : Si vous avez du mal à retirer un accessoire, une serviette humide peut aider à améliorer la prise en main sans endommager les pièces.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Le batteur est bloqué sur mon robot pâtissier, que dois-je faire ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Si le crochet pétrisseur, le fouet à fils ou le mélangeur (batteur plat) est bloqué sur votre robot pâtissier KitchenAid, ne vous inquiétez pas. Voici comment résoudre ce problème :</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Causes possibles :</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Des particules d'aliments peuvent s'accumuler à l'intérieur de la cavité du batteur et se coincer dans l'arbre du batteur.</li>
                                <li>Si vous passez le batteur au lave-vaisselle, veillez à l'insérer pointe vers le bas pour éviter l'accumulation de résidus.</li>
                                <li>Ne stockez pas les fouets sur votre robot lorsqu'ils ne sont pas utilisés, car les ingrédients peuvent pénétrer dans la cavité et durcir.</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Solutions pour retirer un batteur coincé :</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li><strong>Utiliser une compresse chaude :</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>Placez un chiffon chaud et humide autour de l'arbre du batteur pendant 10 minutes.</li>
                                        <li>Réchauffez le chiffon, replacez-le et laissez reposer 1-2 minutes supplémentaires.</li>
                                        <li>La chaleur dilatera l'aluminium, ce qui pourrait faciliter le retrait.</li>
                                    </ul>
                                </li>
                                <li><strong>Utiliser de l'huile minérale :</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>Appliquez une petite quantité d'huile minérale sur l'arbre du batteur, au-dessus du batteur et dans la fente.</li>
                                        <li>Laissez l'huile reposer plusieurs minutes, puis essayez de retirer le batteur.</li>
                                        <li>À défaut d'huile minérale, un spray de cuisson à l'huile végétale peut être utilisé (nettoyez bien après usage).</li>
                                    </ul>
                                </li>
                            </ol>
                            
                            <h4 class="font-medium mt-4 mb-2">Après avoir retiré le batteur :</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Faites tremper le batteur dans de l'eau chaude savonneuse.</li>
                                <li>Nettoyez soigneusement la cavité du batteur, en utilisant une brochette de bois pour éliminer les résidus.</li>
                                <li>Vous pouvez appliquer un peu d'huile minérale sur la cavité avant de réinstaller le batteur.</li>
                            </ol>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Le bol mélangeur est bloqué, pouvez-vous m'aider ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Si le bol de votre robot pâtissier KitchenAid est bloqué et ne se détache pas facilement, ne vous inquiétez pas. Il existe plusieurs techniques pour résoudre ce problème.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Cause principale :</h4>
                            <p>Ce problème survient souvent après avoir préparé des recettes à pâte dense (pain, pâte à biscuits épaisse) pendant plusieurs minutes. La force du mouvement planétaire peut créer une adhérence très forte entre le bol et le socle du robot.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Solutions pour débloquer le bol :</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li><strong>Utiliser une compresse chaude :</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>Placez un chiffon chaud et humide autour du bas du bol pendant 10 minutes.</li>
                                        <li>Réchauffez le chiffon après 10 minutes, replacez-le et laissez reposer 1-2 minutes supplémentaires.</li>
                                        <li>La chaleur dilatera l'acier inoxydable, ce qui facilite le dégagement du bol.</li>
                                        <li>Essayez ensuite de déverrouiller et retirer le bol avec un léger mouvement de rotation.</li>
                                    </ul>
                                </li>
                                <li><strong>Appliquer de l'huile minérale :</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>Appliquez une petite quantité d'huile minérale sur le fond du bol, près de la rainure où il se fixe au socle.</li>
                                        <li>Laissez l'huile pénétrer pendant quelques minutes pour lubrifier la zone.</li>
                                        <li>À défaut d'huile minérale, un spray de cuisson à l'huile végétale peut être utilisé.</li>
                                        <li>Si vous utilisez de l'huile végétale, nettoyez bien le socle après avoir retiré le bol pour éviter l'accumulation collante.</li>
                                    </ul>
                                </li>
                            </ol>
                            
                            <h4 class="font-medium mt-4 mb-2">En dernier recours :</h4>
                            <p>Si les méthodes ci-dessus ne fonctionnent pas, vous pouvez essayer cette technique :</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Enveloppez le bol dans une serviette épaisse pour le protéger.</li>
                                <li>Tapotez très doucement sur la poignée du bol avec un maillet en caoutchouc (jamais avec un outil métallique).</li>
                                <li>Combinez cette technique avec une légère rotation pour libérer le bol.</li>
                            </ul>
                            
                            <p class="mt-4 text-sm italic">Pour éviter ce problème à l'avenir, nettoyez régulièrement la zone de fixation du bol et appliquez occasionnellement une fine couche d'huile minérale sur le mécanisme de verrouillage.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Pourquoi des ingrédients secs sortent-ils du bol ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Si votre robot pâtissier KitchenAid projette des ingrédients secs hors du bol pendant l'utilisation, plusieurs solutions simples existent pour résoudre ce problème courant.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Solutions principales :</h4>
                            
                            <ol class="list-decimal pl-5 space-y-3">
                                <li><strong>Utilisez le couvercle verseur/protecteur :</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>Ce couvercle remplit une double fonction : il permet de verser proprement les ingrédients par la goulotte et empêche les projections pendant le mélange.</li>
                                        <li>Ce couvercle est fourni avec de nombreux modèles de robots KitchenAid.</li>
                                        <li>Il se pose simplement sur le dessus du bol pendant l'utilisation.</li>
                                    </ul>
                                </li>
                                <li><strong>Si vous n'avez pas de couvercle, vous pouvez en acheter un selon votre modèle :</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>Pour les robots de 3,3 L : Couvercle verseur/protecteur 5KSM35PS</li>
                                        <li>Pour les robots de 4,3 L et 4,8 L : Couvercle verseur/protecteur 5KN1PS (compatible avec les robots à tête inclinable)</li>
                                        <li>Pour les robots de 6,9 L : Couvercle verseur/protecteur 5K7PS</li>
                                    </ul>
                                    <p class="text-sm italic mt-1">Note : Ces couvercles ne sont pas compatibles avec les bols en verre, en céramique ou en métal spécial (texturés, matelassés ou martelés).</p>
                                </li>
                            </ol>
                            
                            <h4 class="font-medium mt-4 mb-2">Utilisez la fonction de démarrage progressif :</h4>
                            <p>Si vous préparez souvent des recettes avec beaucoup d'ingrédients secs (comme du pain) :</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Certains modèles sont équipés d'une fonction de "démarrage progressif" qui permet au robot de démarrer lentement et d'augmenter progressivement jusqu'à la vitesse sélectionnée.</li>
                                <li>Cette fonction évite efficacement les projections de farine et d'autres ingrédients secs.</li>
                                <li>Certains modèles disposent également d'une option vitesse 1/2 ou "d'incorporation" particulièrement utile pour intégrer les ingrédients secs.</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Conseils supplémentaires :</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Commencez toujours à la vitesse la plus basse pour incorporer les ingrédients secs.</li>
                                <li>Ajoutez les ingrédients secs progressivement plutôt qu'en une seule fois.</li>
                                <li>Si possible, ajoutez les ingrédients secs lorsque le robot est en pause.</li>
                                <li>Les couvercles verseurs/protecteurs KitchenAid sont en plastique durable et passent au lave-vaisselle.</li>
                            </ul>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Comment régler la broche du col de mon robot pâtissier à tête inclinable ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Si la tête de votre robot pâtissier KitchenAid tressaute ou oscille pendant l'utilisation, ou si la broche du col est desserrée ou est complètement sortie, voici comment procéder.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">À propos de la broche du col :</h4>
                            <p>La broche argentée maintient la tête du robot pâtissier sur la base du robot pâtissier à tête inclinable. Si elle se desserre, vous devez la resserrer pour éviter que la tête tressaute ou oscille pendant l'utilisation.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Comment identifier la broche :</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>C'est une broche métallique argentée qui pénètre entièrement dans le col de tous les robots pâtissiers à tête inclinable.</li>
                                <li>Les extrémités arrondies de la broche sont visibles de chaque côté du col (à la jonction entre la tête inclinable et le socle).</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Si la broche est desserrée mais toujours en place :</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Débranchez d'abord votre robot pâtissier.</li>
                                <li>Placez le robot sur une surface stable et bien éclairée.</li>
                                <li>Localisez la broche argentée sur le col du robot.</li>
                                <li>Si nécessaire, repoussez délicatement la broche en place pour qu'elle soit bien centrée.</li>
                                <li>Vérifiez s'il y a une vis de fixation qui maintient la broche en place et resserrez-la avec un tournevis approprié.</li>
                                <li>Testez le mouvement de la tête du robot pour vous assurer qu'elle est stable et ne tressaute plus.</li>
                            </ol>
                            
                            <h4 class="font-medium mt-4 mb-2">Si la broche est complètement sortie :</h4>
                            <p>Cette opération est plus délicate et peut nécessiter deux personnes :</p>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Une personne doit maintenir la tête du robot précisément alignée avec le socle.</li>
                                <li>L'autre personne doit réinsérer la broche dans l'ouverture.</li>
                                <li>Attention : la broche n'est pas entièrement droite, ce qui peut compliquer son insertion.</li>
                                <li>Une fois la broche insérée, vérifiez qu'elle est bien centrée et fixez-la si nécessaire.</li>
                            </ol>
                            
                            <p class="mt-4 text-sm italic">Note : Si vous n'êtes pas sûr de pouvoir effectuer cette opération vous-même, il est préférable de contacter le service client KitchenAid ou un réparateur agréé pour éviter d'endommager votre appareil.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Mon robot pâtissier émet un bruit/une odeur, est-ce normal ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Si vous vous inquiétez d'un bruit ou d'une odeur provenant de votre robot pâtissier KitchenAid, voici ce qu'il faut savoir pour distinguer les phénomènes normaux des problèmes potentiels.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Bruits normaux du robot pâtissier :</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Les grands robots pâtissiers (modèles professionnels, heavy duty) peuvent être plus bruyants que les modèles plus compacts en raison de leurs moteurs plus puissants et de leurs engrenages entièrement métalliques.</li>
                                <li>Si vous utilisiez auparavant un petit robot pâtissier et avez récemment acquis un modèle plus grand, le niveau sonore peut vous sembler plus élevé initialement.</li>
                                <li>Même des robots pâtissiers de modèle identique peuvent produire des bruits légèrement différents.</li>
                                <li>Un léger ronronnement ou bourdonnement pendant le fonctionnement est parfaitement normal.</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">À propos des cliquetis :</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Il n'est pas inhabituel d'entendre un cliquetis lors de mélanges intensifs, particulièrement lors du pétrissage de pâtes levées.</li>
                                <li>Ces cliquetis peuvent être plus prononcés avec les robots pâtissiers de grande capacité.</li>
                                <li>Un cliquetis léger et occasionnel est généralement normal, surtout au démarrage ou lors du changement de vitesse.</li>
                                <li>Cependant, des cliquetis forts, persistants ou qui s'intensifient avec le temps peuvent indiquer un problème d'engrenage qui nécessite une vérification.</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Odeurs suspectes :</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Un robot neuf peut dégager une légère odeur lors des premières utilisations - c'est normal et disparaît généralement après quelques usages.</li>
                                <li>Une odeur de "brûlé" ou une odeur chimique forte et persistante n'est pas normale.</li>
                                <li>Si votre robot commence à dégager des odeurs inhabituelles pendant l'utilisation, cessez immédiatement de l'utiliser.</li>
                                <li>Dans ce cas, débranchez l'appareil et contactez le service client de votre revendeur ou du fabricant.</li>
                            </ul>
                            
                            <p class="mt-4 text-sm italic">Conseil : Si votre robot fait plus de bruit qu'avant, vérifiez si l'accessoire touche le bol ou si la hauteur du batteur nécessite un ajustement. Des bruits inhabituels peuvent également indiquer que votre robot a besoin d'être lubrifié, surtout s'il est utilisé fréquemment ou s'il est ancien.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Que dois-je faire si mon robot pâtissier cesse de fonctionner ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Si votre robot pâtissier KitchenAid cesse soudainement de fonctionner, ne paniquez pas. Il existe plusieurs vérifications que vous pouvez effectuer avant de contacter le service client.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Vérifications basiques (à faire en premier) :</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li><strong>Vérifiez l'alimentation électrique :</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>Assurez-vous que le robot est correctement branché à une prise électrique.</li>
                                        <li>Testez la prise en y branchant un autre appareil pour vérifier qu'elle fonctionne.</li>
                                        <li>Vérifiez que le cordon d'alimentation n'est pas endommagé (fissures, coupures).</li>
                                    </ul>
                                </li>
                                <li><strong>Vérifiez si le bol est correctement installé :</strong>
                                    <ul class="list-disc pl-5 mt-1">
                                        <li>Certains modèles disposent d'un interrupteur de sécurité qui empêche le robot de fonctionner si le bol n'est pas correctement positionné.</li>
                                        <li>Retirez le bol puis replacez-le en vous assurant qu'il est bien verrouillé en position.</li>
                                    </ul>
                                </li>
                            </ol>
                            
                            <h4 class="font-medium mt-4 mb-2">Protection contre la surchauffe :</h4>
                            <p>Les robots KitchenAid sont équipés d'une protection thermique qui arrête automatiquement l'appareil en cas de surchauffe :</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Si vous avez utilisé le robot intensivement ou sur une longue période, il peut s'être mis en sécurité thermique.</li>
                                <li>Dans ce cas, placez le sélecteur de vitesse en position "0" (arrêt), débranchez l'appareil et laissez-le refroidir pendant 15 à 30 minutes.</li>
                                <li>Une fois refroidi, rebranchez-le et essayez de le redémarrer.</li>
                                <li>Si le problème persiste après le refroidissement, il peut s'agir d'un autre problème.</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Vérifications avancées :</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Vérifiez le fusible/disjoncteur :</strong> Assurez-vous que le fusible correspondant à la prise n'a pas sauté ou que le disjoncteur n'a pas été déclenché.</li>
                                <li><strong>Vérifiez les vitesses :</strong> Testez différentes vitesses, car parfois une position spécifique du sélecteur peut être défectueuse.</li>
                                <li><strong>Contrôlez les engrenages :</strong> Si vous entendez le moteur tourner mais que l'accessoire ne bouge pas, il peut y avoir un problème avec les engrenages internes.</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Quand contacter le service client :</h4>
                            <p>Si aucune des vérifications ci-dessus ne résout le problème, contactez le service client KitchenAid ou un centre de service agréé, surtout si :</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Le robot est encore sous garantie.</li>
                                <li>Vous avez remarqué des odeurs de brûlé avant l'arrêt.</li>
                                <li>Le robot fait des bruits inhabituels juste avant de s'arrêter.</li>
                                <li>Vous observez des signes visibles de dommage (fumée, étincelles, déformation).</li>
                            </ul>
                            
                            <p class="mt-4 text-sm italic">Important : N'essayez jamais de démonter ou de réparer vous-même les composants électriques internes du robot, car cela pourrait annuler votre garantie et présenter des risques de sécurité.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Que dois-je faire si mon robot pâtissier cesse de fonctionner - 2e partie ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <h4 class="font-medium mt-2 mb-2">Qu'avez-vous mélangé et pendant combien de temps ?</h4>
                            <p class="mb-3">Le robot pâtissier multifonction peut chauffer pendant l'utilisation. Lors du mélange de préparations épaisses pendant une période prolongée, il est possible que le dessus de l'appareil soit trop chaud pour que vous puissiez le toucher. C'est normal.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Prépariez-vous quelque chose avec de la vapeur ?</h4>
                            <p class="mb-3">Lorsque vous mélangez une préparation impliquant de la vapeur, celle-ci peut se condenser sur le circuit imprimé du robot pâtissier, interrompant le flux d'électricité et provoquant l'arrêt du moteur. Une fois la vapeur dissipée, l'appareil doit normalement s'allumer à nouveau (patientez environ 3 minutes).</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Si votre robot pâtissier a un dysfonctionnement ou ne réagit pas, vérifiez les points suivants :</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Le robot pâtissier est-il branché ?</li>
                                <li>Est-ce que le fusible du circuit électrique du robot pâtissier fonctionne normalement ? Si vous possédez un boîtier de disjoncteurs, assurez-vous que le circuit est fermé.</li>
                                <li>Mettez le robot pâtissier multifonction hors tension pendant 10 à 15 secondes, puis remettez-le sous tension. Si le robot pâtissier ne démarre toujours pas, laissez-le refroidir 30 minutes avant de le remettre en marche.</li>
                                <li>Si les conseils ci-dessus ne résolvent pas le problème, contactez le service client de votre revendeur ou celui du fabricant.</li>
                            </ul>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Pourquoi le robot pâtissier vibre-t-il ou la tête oscille-t-elle ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">La tête vibre ou tressaute lorsque vous utilisez votre robot pâtissier multifonction ? Découvrez nos conseils sur les vibrations du robot pâtissier ici...</p>
                            
                            <p class="mb-3">Le robot pâtissier multifonction KitchenAid est robuste et conçu pour rester immobile pendant l'utilisation. S'il bouge, voici quelques points à vérifier :</p>
                            
                            <h4 class="font-medium mt-4 mb-2">La tête du robot pâtissier est-elle verrouillée en position ?</h4>
                            <p class="mb-3">Si le batteur est trop haut, la tête du robot pâtissier ne peut pas se verrouiller en position.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Le batteur racle-t-il le fond du bol ?</h4>
                            <p class="mb-3">Si le batteur est trop bas, il pousse le bol et fait tressauter la tête du robot pâtissier.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">La broche argentée à la base du robot pâtissier est-elle desserrée ou saillante ?</h4>
                            <p class="mb-3">Si la broche argentée du col est desserrée, la tête du robot pâtissier peut tressauter.</p>
                            
                            <p class="mt-3">Si le problème persiste malgré ces vérifications, contactez le service client de votre revendeur ou du fabricant.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Pourquoi de l'huile fuit-elle de mon robot pâtissier ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">De l'huile fuit de votre robot pâtissier multifonction KitchenAid et cela vous inquiète ? Si vous rencontrez ce problème, découvrez comment procéder ici...</p>
                            
                            <p class="mb-3">Tout au long du cycle de vie d'un robot pâtissier multifonction KitchenAid, vous rencontrerez parfois les situations suivantes :</p>
                            
                            <ul class="list-disc pl-5 space-y-2 mb-3">
                                <li>Quelques gouttes d'huile au fond du bol</li>
                                <li>De l'huile s'écoulant de l'arbre du batteur</li>
                                <li>Une fuite d'huile au niveau des fentes du levier de verrouillage ou de commande de vitesse sur un robot pâtissier qui a été tourné sur le côté pendant le transport ou le stockage.</li>
                            </ul>
                            
                            <p class="mb-3">La raison en est que le robot pâtissier est rempli d'assez de graisse solide pour toute sa durée de vie. Lorsque vous utilisez le robot pâtissier, la graisse est envoyée autour des engrenages pour les lubrifier. Au fil du temps, une partie de l'huile peut se séparer de la graisse solide et se déposer naturellement au point le plus bas de la tête du moteur, juste au-dessus de l'arbre du batteur si le robot pâtissier est à la verticale, ou les fentes du levier de commande de vitesse ou de verrouillage s'il est sur le côté.</p>
                            
                            <p class="mb-3">Cette situation est plus susceptible de survenir par temps chaud et si vous n'utilisez pas souvent le robot pâtissier. L'utilisation régulière du robot pâtissier peut empêcher cela... alors planifiez dès maintenant les prochains délices que vous préparerez !</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Comment empêcher l'huile de couler du robot pâtissier</h4>
                            <p class="mb-3">Voici quelques conseils pour empêcher les fuites d'huile sur un robot pâtissier multifonction KitchenAid :</p>
                            
                            <ul class="list-disc pl-5 space-y-2 mb-3">
                                <li>De temps en temps, démarrez le robot pâtissier sans aucun ingrédient dans le bol.</li>
                                <li>Si vous n'avez pas utilisé votre robot pâtissier depuis un certain temps, vous pouvez le régler à la vitesse 10 et le laisser tourner 2 minutes avant de l'utiliser. Après ces 2 minutes, arrêtez le robot pâtissier et essuyez tout excédent d'huile autour de l'arbre.</li>
                                <li>De l'huile peut gicler et tacher vos vêtements au cours de ce processus. Par conséquent, si vous disposez d'un couvercle verseur/protecteur, nous vous conseillons de le fixer au bol pour essayer de réduire ce risque.</li>
                                <li>L'utilisation excessive d'un robot pâtissier et le fait de ne pas le laisser refroidir complètement entre les utilisations peuvent également engendrer de tels problèmes.</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Les problèmes persistent ?</h4>
                            <p class="mb-3">Si aucune de ces méthodes ne fonctionne, la seule façon de remédier définitivement à ce problème est de faire réparer le robot pâtissier (un réparateur retire toute la graisse usagée, injecte de la graisse neuve et remplace le joint).</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Remarques concernant les fuites de graisse</h4>
                            <p class="mb-3">Soyez assuré que :</p>
                            
                            <ul class="list-disc pl-5 space-y-2">
                                <li>La graisse est de qualité alimentaire et approuvée pour un contact accidentel avec les aliments préparés dans le robot pâtissier, bien qu'elle puisse décolorer les glaçages de couleur claire ou les purées de pommes de terre.</li>
                                <li>Une fuite d'huile n'endommage pas le robot pâtissier.</li>
                                <li>Il n'est pas nécessaire d'ajouter de l'huile dans le robot pâtissier pour un entretien régulier.</li>
                                <li>À moins que le robot pâtissier ait perdu beaucoup d'huile, cela n'indique en général aucun problème.</li>
                                <li>Si le robot pâtissier émet un bruit « normal » et ne grince pas, vous pouvez continuer à l'utiliser.</li>
                            </ul>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Pourquoi la tête du robot pâtissier est-elle chaude ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Il est tout à fait normal que la tête du robot chauffe. Voici quelques-unes des raisons pour lesquelles elle a pu chauffer...</p>
                            
                            <p class="mb-3">Il peut arriver que la tête du robot pâtissier soit chaude et que vous ne puissiez pas la toucher confortablement. Ne vous inquiétez pas. C'est normal.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Voici les raisons pour lesquelles la tête du robot pâtissier peut être chaude</h4>
                            
                            <h5 class="font-medium mt-3 mb-1">Le robot pâtissier a-t-il été utilisé pendant une longue période ?</h5>
                            <p class="mb-3">Mélanger pendant de longues périodes (succession de lots de pâte, de pâte à pain, etc.) peut faire chauffer la tête du robot pâtissier.</p>
                            
                            <h5 class="font-medium mt-3 mb-1">Le robot pâtissier a-t-il été surchargé ?</h5>
                            <p class="mb-3">Dépasser la capacité maximale d'ingrédients du robot pâtissier peut faire chauffer sa tête.</p>
                            
                            <h5 class="font-medium mt-3 mb-1">Avez-vous utilisé les vitesses recommandées ?</h5>
                            <p class="mb-3">Si vous n'utilisez pas les temps et les vitesses recommandés dans le manuel d'utilisation des accessoires du robot pâtissier, qui garantissent des performances optimales, celui-ci peut chauffer. Grâce à l'action de mélange à mouvement planétaire unique du robot pâtissier KitchenAid, un mélange en profondeur requiert environ la moitié du temps indiqué dans une recette.</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Autres remarques :</h4>
                            <ul class="list-disc pl-5 space-y-2 mb-3">
                                <li>Pétrir 2 minutes avec un robot pâtissier KitchenAid équivaut à pétrir à la main pendant 10 - 12 minutes. Donc pensez à adapter le temps de pétrissage pour vos recettes préférées.</li>
                                <li>La vitesse 2 est la seule vitesse à utiliser pour les pâtes levées.</li>
                                <li>L'utilisation fréquente d'une vitesse supérieure ou inférieure peut nuire au moteur du robot pâtissier.</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Combien de temps faut-il à la tête du robot pâtissier pour refroidir ?</h4>
                            <p class="mb-3">Si le robot pâtissier a chauffé à tel point que vous ne pouvez pas le toucher facilement, laissez-le reposer et refroidir complètement, à l'intérieur comme à l'extérieur, avant de reprendre le mélange. Il faut parfois 30 - 45 minutes pour que l'extérieur et le moteur refroidissent complètement. Si vous continuez à utiliser le robot pâtissier et/ou ses accessoires alors qu'il est très chaud, vous risquez d'endommager votre appareil. Lorsqu'il a complètement refroidi, vous pouvez à nouveau utiliser le robot pâtissier en toute sécurité.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Comment changer les pièces usées de mon robot KitchenAid?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Le remplacement de pièces usées sur votre robot KitchenAid peut prolonger considérablement sa durée de vie. Voici un guide pour les réparations les plus courantes:</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Remplacement des engrenages</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li><strong>Préparation</strong> : Débranchez le robot et placez-le sur une surface protégée. Prévoyez un récipient pour les petites pièces.</li>
                                <li><strong>Accès aux engrenages</strong> : Retirez les vis de fixation du couvercle supérieur (généralement entre 3 et 6 vis selon le modèle).</li>
                                <li><strong>Retrait des engrenages</strong> : Documentez soigneusement la position des engrenages avant démontage (photos). Retirez l'engrenage planétaire principal et inspectez l'engrenage à vis sans fin et l'engrenage en nylon.</li>
                                <li><strong>Remplacement</strong> : Remplacez les engrenages usés ou endommagés. L'engrenage en nylon (parfois appelé "worm gear") est la pièce qui s'use le plus souvent.</li>
                                <li><strong>Lubrification</strong> : Appliquez de la graisse alimentaire sur les engrenages avant remontage.</li>
                                <li><strong>Remontage</strong> : Réinstallez tous les composants dans l'ordre inverse du démontage et serrez les vis correctement.</li>
                            </ol>
                            
                            <h4 class="font-medium mt-4 mb-2">Remplacement des balais de carbone du moteur</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Les balais de carbone sont des pièces d'usure normale qui peuvent nécessiter un remplacement après plusieurs années d'utilisation.</li>
                                <li>Les signes de balais usés incluent un fonctionnement intermittent, des étincelles visibles ou un moteur qui ne démarre pas.</li>
                                <li>Pour accéder aux balais : débranchez le robot, retirez le couvercle arrière en dévissant les vis qui le maintiennent.</li>
                                <li>Les balais sont généralement maintenus par des clips ou des vis. Retirez-les un par un et remplacez-les par des neufs.</li>
                                <li>Assurez-vous que les nouveaux balais sont du modèle exact correspondant à votre robot.</li>
                            </ol>
                            
                            <h4 class="font-medium mt-4 mb-2">Achat de pièces de rechange</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Pièces officielles KitchenAid : disponibles sur le site du fabricant, chez les revendeurs agréés ou auprès du service client.</li>
                                <li>Pièces alternatives : disponibles en ligne, mais assurez-vous de leur compatibilité avec votre modèle spécifique.</li>
                                <li>Pour commander des pièces, vous aurez besoin du numéro de modèle exact (généralement sous le socle du robot).</li>
                            </ul>
                            
                            <h4 class="font-medium mt-4 mb-2">Précautions importantes</h4>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Les réparations non autorisées peuvent annuler votre garantie si le robot est encore sous garantie.</li>
                                <li>Si vous n'êtes pas à l'aise avec les réparations mécaniques, consultez un réparateur professionnel.</li>
                                <li>Utilisez uniquement de la graisse alimentaire approuvée pour les robots KitchenAid lors des réparations.</li>
                                <li>Gardez toutes les vis et petites pièces organisées pendant la réparation.</li>
                                <li>Prenez des photos à chaque étape pour faciliter le remontage.</li>
                            </ul>
                            
                            <p class="mt-4 text-sm italic">Conseil : De nombreux tutoriels vidéo détaillés sont disponibles en ligne pour guider les réparations spécifiques à votre modèle exact de robot KitchenAid.</p>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Comment contacter le Service Clientèle de KitchenAid ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Pour toute question d'ordre général concernant les robots pâtissiers, veuillez appeler le :</p>
                            
                            <div class="my-4 flex flex-col items-center">
                                <p class="text-lg font-semibold">00800 381 04026</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">(numéro gratuit)</p>
                            </div>
                            
                            <div class="my-4 flex flex-col items-center">
                                <p class="text-lg font-semibold">0800 902 236</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">(numéro gratuit)</p>
                            </div>
                            
                            <div class="mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg text-center">
                                <p class="font-medium">Horaires du service client</p>
                                <p>Du lundi au vendredi : 09h00 - 18h00</p>
                            </div>

                        </div>
                    </div>
                    
                    <div class="card">
                        <button class="faq-btn w-full p-4 flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-medium">Où puis-je trouver le modèle et le numéro de série du robot pâtissier ?</span>
                            <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-content hidden px-4 pb-4">
                            <p class="mb-3">Pour localiser le modèle et le numéro de série de votre robot pâtissier KitchenAid, suivez ces instructions :</p>
                            
                            <h4 class="font-medium mt-4 mb-2">Pour les robots à tête inclinable (Artisan, Classic, Mini) :</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Retournez votre robot pâtissier pour accéder au dessous de l'appareil.</li>
                                <li>Vous trouverez une plaque signalétique ou une étiquette argentée contenant les informations.</li>
                                <li>Le numéro de modèle commence généralement par "5K" (par exemple, 5KSM150, 5K45SS).</li>
                                <li>Le numéro de série se trouve sous le numéro de modèle et commence souvent par deux lettres suivies de chiffres.</li>
                            </ol>
                            
                            <h4 class="font-medium mt-4 mb-2">Pour les robots à bol relevable (Professional, Heavy Duty) :</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Les informations se trouvent généralement à l'arrière du socle de l'appareil.</li>
                                <li>Recherchez une plaque métallique ou une étiquette imprimée.</li>
                                <li>Le numéro de modèle commence habituellement par "5KP" ou "5KSM7" (par exemple, 5KPM5, 5KSM7990).</li>
                                <li>Le numéro de série suit le même format que pour les modèles à tête inclinable.</li>
                            </ol>
                            
                            <p class="mt-4">Ces informations sont essentielles pour :</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li>Identifier la version exacte de votre robot lors de l'achat d'accessoires compatibles</li>
                                <li>Bénéficier du service de garantie</li>
                                <li>Commander des pièces de rechange spécifiques</li>
                                <li>Contacter le service client pour une assistance technique</li>
                            </ul>
                            
                            <p class="mt-4 text-sm italic">Conseil : Prenez une photo ou notez ces informations pour les conserver facilement. Vous en aurez besoin si vous contactez le service client ou si vous commandez des pièces de rechange.</p>

                        </div>
                    </div>
                </div>
                
                <div class="mt-6">
                    <button id="back-from-faq" class="btn-secondary px-6 py-2 rounded-lg">Retour au diagnostic</button>
                </div>
            </div>
                
            <!-- Step 5: AI Assistant -->
            <div id="step-ai-assistant" class="step mb-8 hidden">
                <h2 class="text-2xl font-semibold mb-4">Assistant IA KitchenAid</h2>
                <p class="mb-4">Posez une question spécifique à notre assistant IA pour obtenir de l'aide personnalisée avec votre robot KitchenAid.</p>
                
                <div class="card p-6 mb-6">
                    <form id="ai-assistant-form" class="mb-4">
                        <div class="flex flex-col gap-4">
                            <textarea 
                                id="ai-question" 
                                class="w-full p-3 border rounded-lg text-base focus:ring-2 focus:ring-kitchenaid-red focus:border-kitchenaid-red dark:bg-gray-700 dark:border-gray-600 dark:text-white" 
                                placeholder="Ex: Comment puis-je retirer un batteur coincé sur mon Artisan ?" 
                                rows="3"></textarea>
                            <div class="flex justify-end">
                                <button type="submit" id="ask-ai-button" class="btn-primary px-6 py-2 rounded-lg flex items-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                                    </svg>
                                    Poser ma question
                                </button>
                            </div>
                        </div>
                    </form>
                    
                    <div id="ai-loading" class="hidden text-center py-4">
                        <div class="loading-spinner"></div>
                        <p class="mt-2">Notre assistant analyse votre question...</p>
                    </div>
                    
                    <div id="ai-response-container" class="hidden">
                        <h3 class="text-xl font-medium mb-3">Réponse de l'assistant</h3>
                        <div id="ai-response" class="prose prose-sm max-w-none dark:prose-invert bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 overflow-auto max-h-[350px]">
                            <!-- AI response will be inserted here -->
                        </div>
                    </div>
                    
                    <div id="ai-error" class="hidden mt-4 p-4 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg">
                        <p>Une erreur est survenue. Veuillez réessayer ou reformuler votre question.</p>
                    </div>
                </div>
                
                <div class="mt-6 flex flex-wrap gap-2">
                    <button id="back-from-ai" class="btn-secondary px-6 py-2 rounded-lg">Retour au diagnostic</button>
                    <button id="clear-ai-response" class="px-6 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200">Effacer la réponse</button>
                </div>
            </div>
            
            <!-- Step 6: Additional Help -->
            <div id="step-help" class="step mb-8 hidden">
                <h2 class="text-2xl font-semibold mb-4">Besoin d'aide supplémentaire?</h2>
                
                <div class="card p-6 mb-6">
                    <h3 class="text-xl font-medium mb-3">Contacter le service client KitchenAid</h3>
                    <p class="mb-4">Si vous n'avez pas pu résoudre votre problème avec notre diagnostic, vous pouvez contacter le service client KitchenAid :</p>
                    <p class="mb-2"><strong>Téléphone:</strong> 0800 600 120 (gratuit depuis un poste fixe)</p>
                    <p class="mb-2"><strong>Email:</strong> service_client_kitchenaid@whirlpool.com</p>
                    <p><strong>Site web:</strong> <a href="https://www.kitchenaid.fr/service-client" target="_blank" class="text-blue-600 hover:underline">www.kitchenaid.fr/service-client</a></p>
                </div>
                
                <div class="card p-6">
                    <h3 class="text-xl font-medium mb-3">Trouver un réparateur agréé</h3>
                    <p class="mb-4">Localisez un centre de service près de chez vous :</p>
                    <button id="find-repairer-button" class="btn-primary px-6 py-2 rounded-lg">Trouver un réparateur</button>
                </div>
                
                <div class="mt-6">
                    <button id="back-to-diagnosis" class="btn-secondary px-6 py-2 rounded-lg">Retour au diagnostic</button>
                </div>
            </div>
        </main>
        
        <footer class="mt-12 text-center">
            <p class="text-sm opacity-75">© 2025 Assistant Réparation robots KitchenAid | Cet outil personnel, non agréé ou validé par la marque KitchenAid, est fourni exclusivement à titre informatif et sans aucune garantie de succès ni reconnaissance de responsabilité de la part de l'auteur. Si votre appareil est toujours sous garantie, contactez en priorité votre revendeur ou le fabricant. KitchenAid est une marque déposée.</p>
            <p class="text-sm opacity-75 mt-1">Pour les réparations complexes, veuillez contacter un technicien qualifié.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Vérifier si l'API Poe est disponible
            const isPoeAvailable = typeof window.Poe !== 'undefined' && 
                                  typeof window.Poe.sendUserMessage === 'function';
            
            console.log('Poe API disponible:', isPoeAvailable);
            
            // Variables
            const stepModel = document.getElementById('step-model');
            const stepSymptoms = document.getElementById('step-symptoms');
            const stepDiagnosis = document.getElementById('step-diagnosis');
            const stepFaq = document.getElementById('step-faq');
            const stepHelp = document.getElementById('step-help');
            
            const modelCards = document.querySelectorAll('.model-card');
            const backToModelBtn = document.getElementById('back-to-model');
            const diagnoseBtn = document.getElementById('diagnose-button');
            const backToSymptomsBtn = document.getElementById('back-to-symptoms');
            const restartBtn = document.getElementById('restart-button');
            const backToDiagnosisBtn = document.getElementById('back-to-diagnosis');
            const backFromFaqBtn = document.getElementById('back-from-faq');
            const findRepairerBtn = document.getElementById('find-repairer-button');
            
            const loadingIndicator = document.getElementById('loading');
            const diagnosisResult = document.getElementById('diagnosis-result');
            const problemDescription = document.getElementById('problem-description');
            const repairSteps = document.getElementById('repair-steps');
            const repairImage = document.getElementById('repair-image');
            
            const symptomCheckboxes = document.querySelectorAll('.symptom-checkbox');
            
            // State
            let selectedModel = '';
            let selectedSymptoms = [];
            
            // Get FAQ elements
            const faqButtons = document.querySelectorAll('.faq-btn');
            const viewFaqButton = document.getElementById('view-faq-button');
            const viewFaqFromHomeButton = document.getElementById('view-faq-from-home');
            
            // Initialize
            function init() {
                // Check if elements exist in DOM before adding event listeners
                
                // Si l'API Poe n'est pas disponible, masquer les fonctionnalités liées à l'IA
                if (!isPoeAvailable) {
                    // Masquer toutes les fonctionnalités d'IA
                    handlePoeUnavailable();
                }
                
                // Model selection
                if (modelCards && modelCards.length > 0) {
                    modelCards.forEach(card => {
                        card.addEventListener('click', function() {
                            selectedModel = this.dataset.model;
                            modelCards.forEach(c => c.classList.remove('ring-2', 'ring-kitchenaid-red'));
                            this.classList.add('ring-2', 'ring-kitchenaid-red');
                            
                            // Move to next step
                            setTimeout(() => {
                                if (stepModel && stepSymptoms) {
                                    stepModel.classList.add('hidden');
                                    stepSymptoms.classList.remove('hidden');
                                }
                            }, 300);
                        });
                    });
                }
                
                // Symptom selection
                if (symptomCheckboxes && symptomCheckboxes.length > 0) {
                    symptomCheckboxes.forEach(checkbox => {
                        checkbox.addEventListener('change', function() {
                            if (this.checked) {
                                if (!selectedSymptoms.includes(this.value)) {
                                    selectedSymptoms.push(this.value);
                                }
                            } else {
                                const index = selectedSymptoms.indexOf(this.value);
                                if (index > -1) {
                                    selectedSymptoms.splice(index, 1);
                                }
                            }
                            
                            // Enable diagnosis button if at least one symptom is selected
                            if (diagnoseBtn) {
                                diagnoseBtn.disabled = selectedSymptoms.length === 0;
                                if (selectedSymptoms.length === 0) {
                                    diagnoseBtn.classList.add('opacity-50', 'cursor-not-allowed');
                                } else {
                                    diagnoseBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                                }
                            }
                        });
                    });
                }
                
                // Navigation buttons
                if (backToModelBtn && stepSymptoms && stepModel) {
                    backToModelBtn.addEventListener('click', function() {
                        stepSymptoms.classList.add('hidden');
                        stepModel.classList.remove('hidden');
                    });
                }
                
                if (diagnoseBtn && stepSymptoms && stepDiagnosis && loadingIndicator && diagnosisResult) {
                    diagnoseBtn.addEventListener('click', function() {
                        if (selectedSymptoms.length === 0) return;
                        
                        stepSymptoms.classList.add('hidden');
                        stepDiagnosis.classList.remove('hidden');
                        
                        // Show loading indicator
                        loadingIndicator.classList.remove('hidden');
                        diagnosisResult.classList.add('hidden');
                        
                        // Simulate diagnosis (in a real app, this would be an API call)
                        setTimeout(() => {
                            performDiagnosis();
                            loadingIndicator.classList.add('hidden');
                            diagnosisResult.classList.remove('hidden');
                        }, 1500);
                    });
                }
                
                if (backToSymptomsBtn && stepDiagnosis && stepSymptoms) {
                    backToSymptomsBtn.addEventListener('click', function() {
                        stepDiagnosis.classList.add('hidden');
                        stepSymptoms.classList.remove('hidden');
                    });
                }
                
                if (restartBtn) {
                    restartBtn.addEventListener('click', function() {
                        resetApp();
                    });
                }
                
                // FAQ buttons
                if (viewFaqButton && stepDiagnosis && stepFaq) {
                    viewFaqButton.addEventListener('click', function() {
                        stepDiagnosis.classList.add('hidden');
                        stepFaq.classList.remove('hidden');
                    });
                }
                
                if (viewFaqFromHomeButton && stepModel && stepFaq) {
                    viewFaqFromHomeButton.addEventListener('click', function(e) {
                        // Empêcher la propagation du clic vers les cartes de modèle
                        e.stopPropagation();
                        stepModel.classList.add('hidden');
                        stepFaq.classList.remove('hidden');
                    });
                }
                
                if (backFromFaqBtn && stepFaq && stepDiagnosis && stepModel) {
                    backFromFaqBtn.addEventListener('click', function() {
                        stepFaq.classList.add('hidden');
                        
                        // Check where we came from and return there
                        if (!stepDiagnosis.classList.contains('hidden')) {
                            // Already visible, do nothing
                        } else if (selectedModel) {
                            // If we have a selected model, we were in diagnosis
                            stepDiagnosis.classList.remove('hidden');
                        } else {
                            // Otherwise we came from home
                            stepModel.classList.remove('hidden');
                        }
                    });
                }
                
                // FAQ accordion functionality
                if (faqButtons && faqButtons.length > 0) {
                    faqButtons.forEach(button => {
                        button.addEventListener('click', function() {
                            const content = this.nextElementSibling;
                            const icon = this.querySelector('.faq-icon');
                            
                            if (!content || !icon) return;
                            
                            // Toggle the active state
                            const isExpanded = this.getAttribute('aria-expanded') === 'true';
                            this.setAttribute('aria-expanded', !isExpanded);
                            
                            // Toggle content visibility
                            if (isExpanded) {
                                content.classList.add('hidden');
                                icon.style.transform = 'rotate(0deg)';
                            } else {
                                content.classList.remove('hidden');
                                icon.style.transform = 'rotate(180deg)';
                            }
                        });
                    });
                }
                
                if (backToDiagnosisBtn && stepHelp && stepDiagnosis) {
                    backToDiagnosisBtn.addEventListener('click', function() {
                        stepHelp.classList.add('hidden');
                        stepDiagnosis.classList.remove('hidden');
                    });
                }
                
                if (findRepairerBtn) {
                    findRepairerBtn.addEventListener('click', function() {
                        // In a real app, this would open a map or search for repair centers
                        window.open('https://www.kitchenaid.fr/service-client/trouver-un-reparateur', '_blank', 'noopener,noreferrer');
                    });
                }
                
                // Disable diagnosis button initially
                if (diagnoseBtn) {
                    diagnoseBtn.disabled = true;
                    diagnoseBtn.classList.add('opacity-50', 'cursor-not-allowed');
                }
            }
            
            // Reset the application
            function resetApp() {
                // Reset state
                selectedModel = '';
                selectedSymptoms = [];
                
                // Reset UI
                modelCards.forEach(card => card.classList.remove('ring-2', 'ring-kitchenaid-red'));
                symptomCheckboxes.forEach(checkbox => checkbox.checked = false);
                
                // Reset diagnosis
                problemDescription.textContent = '';
                repairSteps.innerHTML = '';
                repairImage.innerHTML = '';
                
                // Navigate to first step
                stepDiagnosis.classList.add('hidden');
                stepHelp.classList.add('hidden');
                stepSymptoms.classList.add('hidden');
                stepFaq.classList.add('hidden');
                stepModel.classList.remove('hidden');
                
                // Disable diagnosis button
                diagnoseBtn.disabled = true;
                diagnoseBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
            
            // Perform diagnosis based on model and symptoms
            function performDiagnosis() {
                // Problems database (simplified for demonstration)
                const problems = {
                    'bruit-anormal': {
                        title: "Engrenages usés ou mal lubrifiés",
                        description: "Les bruits anormaux comme les grincements ou cliquetis sont souvent causés par des engrenages usés ou mal lubrifiés.",
                        solutions: [
                            "Débranchez votre robot de cuisine.",
                            "Retirez le couvercle supérieur en dévissant les vis de fixation.",
                            "Inspectez les engrenages pour détecter tout signe d'usure ou de dommage.",
                            "Appliquez une petite quantité de graisse alimentaire sur les engrenages.",
                            "En cas d'engrenages très usés ou endommagés, ils devront être remplacés."
                        ],
                        illustration: createGearIllustration()
                    },
                    'ne-demarre-pas': {
                        title: "Problème électrique",
                        description: "Si votre robot ne démarre pas du tout, il peut s'agir d'un problème de connexion électrique, de fusible ou de commutateur.",
                        solutions: [
                            "Vérifiez que le robot est correctement branché à une prise fonctionnelle.",
                            "Inspectez le cordon d'alimentation pour tout dommage visible.",
                            "Vérifiez que la prise de courant fonctionne en y branchant un autre appareil.",
                            "Assurez-vous que le bol est correctement installé (certains modèles ont un verrou de sécurité).",
                            "Vérifiez le fusible interne du robot (consultez le manuel pour sa localisation)."
                        ],
                        illustration: createElectricalIllustration()
                    },
                    'tete-instable': {
                        title: "Problème de verrouillage de la tête",
                        description: "Si la tête de votre robot est instable ou tombe pendant l'utilisation, le mécanisme de verrouillage peut être endommagé ou mal ajusté.",
                        solutions: [
                            "Débranchez le robot de cuisine.",
                            "Identifiez la vis de réglage de la hauteur de la tête (généralement située à la base de la tête du robot).",
                            "À l'aide d'un tournevis plat, tournez légèrement la vis de réglage dans le sens horaire pour abaisser la tête ou dans le sens antihoraire pour l'élever.",
                            "Testez le verrouillage après chaque ajustement jusqu'à ce que la tête se verrouille correctement.",
                            "Si le problème persiste, le mécanisme de verrouillage peut nécessiter un remplacement."
                        ],
                        illustration: createHeadLockIllustration()
                    },
                    'accessoire-ne-tourne-pas': {
                        title: "Problème d'engrenage ou de fixation",
                        description: "Si l'accessoire ne tourne pas correctement, cela peut être dû à un problème d'engrenage ou à une mauvaise fixation.",
                        solutions: [
                            "Vérifiez que l'accessoire est correctement fixé au moyeu.",
                            "Inspectez l'accessoire pour tout dommage visible.",
                            "Retirez puis réinstallez l'accessoire en vous assurant qu'il est bien enclenché.",
                            "Vérifiez le moyeu pour tout signe de dommage ou d'obstruction.",
                            "Si le problème persiste, le mécanisme d'entraînement interne peut être endommagé."
                        ],
                        illustration: createAttachmentIllustration()
                    },
                    'surchauffe': {
                        title: "Problème de moteur ou usage excessif",
                        description: "La surchauffe peut être causée par une utilisation trop longue ou intensive, ou par un problème du moteur.",
                        solutions: [
                            "Éteignez immédiatement le robot et débranchez-le.",
                            "Laissez-le refroidir complètement pendant au moins 30 minutes.",
                            "Assurez-vous que les évents de ventilation ne sont pas obstrués.",
                            "Réduisez la quantité d'ingrédients traités en une seule fois.",
                            "Évitez de faire fonctionner le robot à haute vitesse pendant de longues périodes."
                        ],
                        illustration: createOverheatingIllustration()
                    },
                    'fuite-huile': {
                        title: "Joints d'étanchéité défectueux",
                        description: "Les fuites d'huile sont généralement causées par des joints d'étanchéité usés ou défectueux.",
                        solutions: [
                            "Débranchez le robot et placez-le sur une surface protégée.",
                            "Retirez le couvercle arrière en dévissant les vis de fixation.",
                            "Identifiez la source de la fuite d'huile.",
                            "Remplacez les joints d'étanchéité endommagés (disponibles dans les kits de réparation).",
                            "Vérifiez le niveau d'huile et ajoutez de l'huile pour engrenages si nécessaire."
                        ],
                        illustration: createOilLeakIllustration()
                    },
                    'vitesse-irreguliere': {
                        title: "Problème du régulateur de vitesse",
                        description: "Une vitesse irrégulière peut indiquer un problème avec le régulateur de vitesse ou les connexions électriques.",
                        solutions: [
                            "Débranchez le robot de cuisine.",
                            "Vérifiez que le sélecteur de vitesse se déplace librement sans obstruction.",
                            "Nettoyez le sélecteur de vitesse avec un chiffon sec.",
                            "Vérifiez les connexions électriques internes si vous êtes à l'aise avec l'électronique.",
                            "Le module de contrôle de vitesse peut nécessiter un remplacement si le problème persiste."
                        ],
                        illustration: createSpeedControlIllustration()
                    },
                    'melange-inadequat': {
                        title: "Mauvais réglage de la hauteur du bol",
                        description: "Si votre robot ne mélange pas tous les ingrédients, le bol peut être mal positionné ou l'accessoire mal réglé.",
                        solutions: [
                            "Éteignez et débranchez le robot.",
                            "Vérifiez que le bol est correctement positionné et verrouillé.",
                            "Ajustez la hauteur du bol en tournant la vis de réglage située sous le robot.",
                            "Vérifiez l'état de l'accessoire pour tout signe de dommage ou d'usure.",
                            "Testez avec différents accessoires pour déterminer si le problème est spécifique à un accessoire."
                        ],
                        illustration: createBowlHeightIllustration()
                    }
                };
                
                // Determine the most likely problem based on symptoms
                let mainProblem = null;
                if (selectedSymptoms.length === 1) {
                    // If only one symptom, use that one
                    mainProblem = problems[selectedSymptoms[0]];
                } else {
                    // Priority order (simplified for demo)
                    const prioritySymptoms = [
                        'ne-demarre-pas',
                        'surchauffe',
                        'bruit-anormal',
                        'fuite-huile',
                        'tete-instable',
                        'accessoire-ne-tourne-pas',
                        'vitesse-irreguliere',
                        'melange-inadequat'
                    ];
                    
                    // Find the highest priority symptom from selected ones
                    for (const symptom of prioritySymptoms) {
                        if (selectedSymptoms.includes(symptom)) {
                            mainProblem = problems[symptom];
                            break;
                        }
                    }
                }
                
                // If no problem found (shouldn't happen), use a default
                if (!mainProblem) {
                    mainProblem = {
                        title: "Problème indéterminé",
                        description: "Nous n'avons pas pu identifier précisément votre problème avec les symptômes décrits.",
                        solutions: [
                            "Contactez le service client KitchenAid pour obtenir une assistance spécialisée.",
                            "Consultez le manuel d'utilisation pour des informations supplémentaires.",
                            "Envisagez de consulter un réparateur agréé."
                        ],
                        illustration: createGenericIllustration()
                    };
                }
                
                // Display the diagnosis
                problemDescription.innerHTML = `<strong>${mainProblem.title}:</strong> ${mainProblem.description}`;
                
                // Display repair steps
                repairSteps.innerHTML = '';
                mainProblem.solutions.forEach((step, index) => {
                    const stepElement = document.createElement('div');
                    stepElement.className = 'flex items-start';
                    stepElement.innerHTML = `
                        <div class="flex-shrink-0 bg-kitchenaid-red text-white rounded-full w-6 h-6 flex items-center justify-center mr-3">
                            ${index + 1}
                        </div>
                        <p>${step}</p>
                    `;
                    
                    // Add animation delay for steps
                    stepElement.style.animation = `fadeIn 0.5s ${index * 0.1}s forwards`;
                    stepElement.style.opacity = '0';
                    
                    repairSteps.appendChild(stepElement);
                });
                
                // Add illustration
                repairImage.innerHTML = '';
                if (mainProblem.illustration) {
                    repairImage.appendChild(mainProblem.illustration);
                }
            }
            
            // Illustration functions for different problems
            function createGearIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <circle cx="100" cy="100" r="40" fill="#ddd" stroke="#666" stroke-width="2"/>
                        <circle cx="100" cy="100" r="35" fill="none" stroke="#888" stroke-width="1" stroke-dasharray="5,3"/>
                        <circle cx="100" cy="100" r="10" fill="#999"/>
                        <circle cx="200" cy="100" r="30" fill="#ddd" stroke="#666" stroke-width="2"/>
                        <circle cx="200" cy="100" r="25" fill="none" stroke="#888" stroke-width="1" stroke-dasharray="5,3"/>
                        <circle cx="200" cy="100" r="8" fill="#999"/>
                        
                        <!-- Gear teeth for large gear -->
                        ${Array.from({length: 12}, (_, i) => {
                            const angle = i * 30 * Math.PI / 180;
                            const x1 = 100 + 38 * Math.cos(angle);
                            const y1 = 100 + 38 * Math.sin(angle);
                            const x2 = 100 + 45 * Math.cos(angle);
                            const y2 = 100 + 45 * Math.sin(angle);
                            return `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="#666" stroke-width="3"/>`;
                        }).join('')}
                        
                        <!-- Gear teeth for small gear -->
                        ${Array.from({length: 9}, (_, i) => {
                            const angle = i * 40 * Math.PI / 180;
                            const x1 = 200 + 28 * Math.cos(angle);
                            const y1 = 100 + 28 * Math.sin(angle);
                            const x2 = 200 + 34 * Math.cos(angle);
                            const y2 = 100 + 34 * Math.sin(angle);
                            return `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="#666" stroke-width="3"/>`;
                        }).join('')}
                        
                        <!-- Grease indicator -->
                        <circle cx="150" cy="100" r="10" fill="#FFCC00" opacity="0.7">
                            <animate attributeName="opacity" values="0.7;0.2;0.7" dur="2s" repeatCount="indefinite" />
                        </circle>
                        <text x="150" y="170" text-anchor="middle" font-size="14" fill="currentColor">Appliquez de la graisse ici</text>
                        <path d="M150,115 L150,140" stroke="currentColor" stroke-width="1" stroke-dasharray="3,2"/>
                    </svg>
                `;
                return svgContainer;
            }
            
            function createElectricalIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <!-- Power cord -->
                        <path d="M50,150 C70,160 90,140 110,150 C130,160 150,140 170,150 C190,160 210,140 230,150 L250,150" 
                              fill="none" stroke="#333" stroke-width="4"/>
                        
                        <!-- Plug -->
                        <rect x="250" y="140" width="30" height="20" rx="2" fill="#555"/>
                        <rect x="280" y="145" width="10" height="10" rx="1" fill="#777"/>
                        
                        <!-- Socket -->
                        <rect x="20" y="140" width="30" height="20" rx="2" fill="#ddd" stroke="#333"/>
                        <circle cx="30" cy="150" r="5" fill="#666"/>
                        <circle cx="40" cy="150" r="5" fill="#666"/>
                        
                        <!-- Mixer Body (simplified) -->
                        <rect x="100" y="50" width="100" height="70" rx="10" fill="#ddd" stroke="#555" stroke-width="2"/>
                        
                        <!-- Control panel -->
                        <rect x="120" y="60" width="60" height="20" rx="3" fill="#eee" stroke="#777"/>
                        <circle cx="135" cy="70" r="7" fill="#ccc" stroke="#666"/>
                        <line x1="128" y1="70" x2="142" y2="70" stroke="#666" stroke-width="1"/>
                        <text x="160" y="75" font-size="10" fill="#444">OFF</text>
                        
                        <!-- Warning indicators -->
                        <circle cx="75" cy="70" r="15" fill="#ff6b6b">
                            <animate attributeName="opacity" values="1;0.3;1" dur="1.5s" repeatCount="indefinite" />
                        </circle>
                        <text x="75" y="74" text-anchor="middle" font-size="12" fill="white" font-weight="bold">!</text>
                        <text x="75" y="95" text-anchor="middle" font-size="10" fill="currentColor">Vérifiez le</text>
                        <text x="75" y="108" text-anchor="middle" font-size="10" fill="currentColor">branchement</text>
                        
                        <circle cx="225" cy="70" r="15" fill="#ffcc5c">
                            <animate attributeName="opacity" values="1;0.3;1" dur="1.5s" repeatCount="indefinite" />
                        </circle>
                        <text x="225" y="74" text-anchor="middle" font-size="12" fill="white" font-weight="bold">F</text>
                        <text x="225" y="95" text-anchor="middle" font-size="10" fill="currentColor">Vérifiez le</text>
                        <text x="225" y="108" text-anchor="middle" font-size="10" fill="currentColor">fusible</text>
                    </svg>
                `;
                return svgContainer;
            }
            
            function createHeadLockIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <!-- Mixer base -->
                        <rect x="75" y="150" width="150" height="30" rx="5" fill="#ddd" stroke="#666" stroke-width="2"/>
                        
                        <!-- Mixer column -->
                        <rect x="125" y="80" width="50" height="70" fill="#ccc" stroke="#666" stroke-width="2"/>
                        
                        <!-- Mixer head -->
                        <path d="M100,80 L200,80 L180,50 L120,50 Z" fill="#eee" stroke="#666" stroke-width="2"/>
                        
                        <!-- Lock mechanism -->
                        <circle cx="150" cy="85" r="10" fill="#ff6b6b" stroke="#333"/>
                        <rect x="145" y="75" width="10" height="20" fill="#ff6b6b" stroke="#333" rx="2">
                            <animateTransform attributeName="transform" type="rotate" from="0 150 85" to="15 150 85" dur="2s" repeatCount="indefinite" />
                        </rect>
                        
                        <!-- Adjustment screw -->
                        <circle cx="150" cy="120" r="8" fill="#aaa" stroke="#666"/>
                        <line x1="146" y1="116" x2="154" y2="124" stroke="#666" stroke-width="2"/>
                        <line x1="146" y1="124" x2="154" y2="116" stroke="#666" stroke-width="2"/>
                        
                        <!-- Indicator -->
                        <path d="M170,120 L190,120 L195,125 L190,130 L170,130 Z" fill="#ffcc5c"/>
                        <text x="180" y="127" text-anchor="middle" font-size="8" fill="#333">AJUSTER</text>
                        <line x1="158" y1="120" x2="170" y2="120" stroke="#666" stroke-width="1" stroke-dasharray="2,1"/>
                        
                        <!-- Instructions -->
                        <text x="150" y="170" text-anchor="middle" font-size="10" fill="currentColor">Tourner la vis d'ajustement pour régler la hauteur</text>
                        <path d="M150,130 L150,155" stroke="currentColor" stroke-width="1" stroke-dasharray="3,2"/>
                    </svg>
                `;
                return svgContainer;
            }
            
            function createAttachmentIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <!-- Mixer head (partial) -->
                        <path d="M100,60 L200,60 L180,30 L120,30 Z" fill="#eee" stroke="#666" stroke-width="2"/>
                        
                        <!-- Attachment hub -->
                        <circle cx="120" cy="70" r="15" fill="#ccc" stroke="#666" stroke-width="2"/>
                        <circle cx="120" cy="70" r="10" fill="#999" stroke="#666"/>
                        <circle cx="120" cy="70" r="5" fill="#777"/>
                        
                        <!-- Attachment shaft -->
                        <rect x="115" y="70" width="10" height="40" fill="#aaa" stroke="#666"/>
                        
                        <!-- Bowl -->
                        <ellipse cx="150" cy="150" rx="70" ry="20" fill="#f5f5f5" stroke="#666"/>
                        <path d="M80,150 C80,120 100,90 150,90 C200,90 220,120 220,150" fill="none" stroke="#666" stroke-width="2"/>
                        
                        <!-- Mixing attachment (whisk example) -->
                        <line x1="120" y1="85" x2="120" y2="130" stroke="#888" stroke-width="3"/>
                        
                        <path d="M100,130 C110,120 115,110 120,130" fill="none" stroke="#888" stroke-width="2"/>
                        <path d="M140,130 C130,120 125,110 120,130" fill="none" stroke="#888" stroke-width="2"/>
                        
                        <!-- Indicator showing attachment point -->
                        <circle cx="120" cy="70" r="20" fill="transparent" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="3,2">
                            <animate attributeName="r" values="20;25;20" dur="2s" repeatCount="indefinite" />
                        </circle>
                        
                        <!-- Instructional notes -->
                        <text x="120" y="25" text-anchor="middle" font-size="12" fill="currentColor">Point d'attache</text>
                        <line x1="120" y1="30" x2="120" y2="50" stroke="currentColor" stroke-width="1" stroke-dasharray="2,1"/>
                        
                        <text x="210" y="80" text-anchor="middle" font-size="12" fill="currentColor">Vérifiez l'alignement</text>
                        <path d="M170,80 C180,75 190,75 200,80" stroke="currentColor" stroke-width="1" marker-end="url(#arrow)" stroke-dasharray="2,1"/>
                    </svg>
                `;
                return svgContainer;
            }
            
            function createOverheatingIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <!-- Mixer body simplified -->
                        <rect x="100" y="50" width="100" height="100" rx="10" fill="#ddd" stroke="#666" stroke-width="2"/>
                        
                        <!-- Motor representation -->
                        <ellipse cx="150" cy="100" rx="30" ry="20" fill="#bbb" stroke="#666"/>
                        <circle cx="150" cy="100" r="15" fill="#999" stroke="#666">
                            <animateTransform attributeName="transform" type="rotate" from="0 150 100" to="360 150 100" dur="2s" repeatCount="indefinite" />
                        </circle>
                        <circle cx="150" cy="100" r="5" fill="#777"/>
                        
                        <!-- Ventilation holes -->
                        ${Array.from({length: 5}, (_, i) => {
                            return `<rect x="${110 + i*18}" y="60" width="8" height="3" rx="1" fill="#666"/>`;
                        }).join('')}
                        ${Array.from({length: 5}, (_, i) => {
                            return `<rect x="${110 + i*18}" y="137" width="8" height="3" rx="1" fill="#666"/>`;
                        }).join('')}
                        
                        <!-- Heat visualization -->
                        <path d="M150,70 Q160,60 170,70 Q180,80 190,70" stroke="#ff6b6b" stroke-width="2" fill="none" opacity="0.8">
                            <animate attributeName="d" values="M150,70 Q160,60 170,70 Q180,80 190,70;M150,65 Q160,75 170,65 Q180,55 190,65;M150,70 Q160,60 170,70 Q180,80 190,70" dur="3s" repeatCount="indefinite" />
                            <animate attributeName="opacity" values="0.8;0.3;0.8" dur="3s" repeatCount="indefinite" />
                        </path>
                        
                        <path d="M110,70 Q120,60 130,70 Q140,80 150,70" stroke="#ff6b6b" stroke-width="2" fill="none" opacity="0.8">
                            <animate attributeName="d" values="M110,70 Q120,60 130,70 Q140,80 150,70;M110,65 Q120,75 130,65 Q140,55 150,65;M110,70 Q120,60 130,70 Q140,80 150,70" dur="2.5s" repeatCount="indefinite" />
                            <animate attributeName="opacity" values="0.8;0.3;0.8" dur="2.5s" repeatCount="indefinite" />
                        </path>
                        
                        <!-- Warning symbol -->
                        <path d="M150,25 L170,45 L130,45 Z" fill="#ff6b6b" stroke="#333"/>
                        <text x="150" y="40" text-anchor="middle" font-size="14" fill="white" font-weight="bold">!</text>
                        
                        <!-- Timer symbol -->
                        <circle cx="240" cy="100" r="20" fill="#ffcc5c" stroke="#666" stroke-width="2"/>
                        <text x="240" y="105" text-anchor="middle" font-size="18" fill="#333" font-weight="bold">30</text>
                        <text x="240" y="130" text-anchor="middle" font-size="12" fill="currentColor">min</text>
                        
                        <!-- Instructions -->
                        <text x="150" y="175" text-anchor="middle" font-size="12" fill="currentColor">Laissez refroidir 30 minutes</text>
                    </svg>
                `;
                return svgContainer;
            }
            
            function createOilLeakIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <!-- Mixer outline -->
                        <rect x="100" y="50" width="100" height="100" rx="10" fill="#ddd" stroke="#666" stroke-width="2"/>
                        
                        <!-- Panel opening -->
                        <rect x="110" y="60" width="80" height="80" rx="5" fill="#ccc" stroke="#666" stroke-width="1" stroke-dasharray="5,2"/>
                        
                        <!-- Gears inside -->
                        <circle cx="140" cy="100" r="15" fill="#aaa" stroke="#666"/>
                        <circle cx="140" cy="100" r="10" fill="none" stroke="#666" stroke-dasharray="2,1"/>
                        <circle cx="140" cy="100" r="3" fill="#666"/>
                        
                        <circle cx="170" cy="100" r="10" fill="#aaa" stroke="#666"/>
                        <circle cx="170" cy="100" r="7" fill="none" stroke="#666" stroke-dasharray="2,1"/>
                        <circle cx="170" cy="100" r="2" fill="#666"/>
                        
                        <!-- Oil leak visualization -->
                        <path d="M140,115 C140,125 150,135 140,145" fill="none" stroke="#F4D03F" stroke-width="2" opacity="0.8">
                            <animate attributeName="d" values="M140,115 C140,125 150,135 140,145;M140,115 C135,128 145,138 140,145;M140,115 C140,125 150,135 140,145" dur="3s" repeatCount="indefinite" />
                        </path>
                        
                        <path d="M140,145 L140,155" stroke="#F4D03F" stroke-width="3" opacity="0.8"/>
                        
                        <ellipse cx="140" cy="160" rx="5" ry="3" fill="#F4D03F" opacity="0.8">
                            <animate attributeName="rx" values="5;7;5" dur="2s" repeatCount="indefinite" />
                        </ellipse>
                        
                        <!-- Seal indicator -->
                        <circle cx="155" cy="115" r="8" fill="#ff6b6b" stroke="#333" stroke-width="1"/>
                        <text x="155" y="118" text-anchor="middle" font-size="10" fill="white">!</text>
                        
                        <path d="M155,115 L170,130" stroke="#666" stroke-width="1" stroke-dasharray="2,1"/>
                        <text x="185" y="140" text-anchor="middle" font-size="10" fill="currentColor">Joint</text>
                        <text x="185" y="152" text-anchor="middle" font-size="10" fill="currentColor">défectueux</text>
                        
                        <!-- Screwdriver icon -->
                        <line x1="70" y1="70" x2="90" y2="90" stroke="#666" stroke-width="3"/>
                        <rect x="65" y="65" width="10" height="7" rx="1" fill="#666"/>
                        <text x="70" y="55" text-anchor="middle" font-size="10" fill="currentColor">Retirez</text>
                        <text x="70" y="65" text-anchor="middle" font-size="10" fill="currentColor">le panneau</text>
                    </svg>
                `;
                return svgContainer;
            }
            
            function createSpeedControlIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <!-- Control panel outline -->
                        <rect x="75" y="50" width="150" height="100" rx="10" fill="#eee" stroke="#666" stroke-width="2"/>
                        
                        <!-- Speed controller -->
                        <circle cx="150" cy="100" r="40" fill="#ddd" stroke="#666" stroke-width="1"/>
                        
                        <!-- Speed numbers -->
                        ${Array.from({length: 10}, (_, i) => {
                            const angle = (i * 30 - 60) * Math.PI / 180;
                            const x = 150 + 30 * Math.cos(angle);
                            const y = 100 + 30 * Math.sin(angle);
                            return `<text x="${x}" y="${y}" text-anchor="middle" dominant-baseline="middle" font-size="10" fill="#666">${i}</text>`;
                        }).join('')}
                        
                        <!-- Speed lever -->
                        <line x1="150" y1="100" x2="150" y2="70" stroke="#666" stroke-width="3">
                            <animateTransform attributeName="transform" type="rotate" from="0 150 100" to="60 150 100" dur="1s" repeatCount="indefinite" values="0 150 100; 60 150 100; 50 150 100; 60 150 100" keyTimes="0; 0.4; 0.5; 1" />
                        </line>
                        <circle cx="150" cy="100" r="5" fill="#888"/>
                        
                        <!-- Controller module representation -->
                        <rect x="100" y="150" width="100" height="20" rx="2" fill="#ccc" stroke="#666"/>
                        <line x1="150" y1="120" x2="150" y2="150" stroke="#666" stroke-width="1" stroke-dasharray="3,2"/>
                        
                        <!-- Indicator -->
                        <rect x="110" y="155" width="80" height="10" rx="2" fill="#bbb"/>
                        ${Array.from({length: 8}, (_, i) => {
                            return `<rect x="${114 + i*10}" y="157" width="6" height="6" rx="1" fill="${i % 2 === 0 ? '#32CD32' : '#666'}"/>`;
                        }).join('')}
                        
                        <!-- Warning -->
                        <path d="M230,100 L240,80 L220,80 Z" fill="#ff6b6b" stroke="#333"/>
                        <text x="230" y="95" text-anchor="middle" font-size="10" fill="currentColor">Vitesse</text>
                        <text x="230" y="107" text-anchor="middle" font-size="10" fill="currentColor">irrégulière</text>
                        
                        <!-- Connection visualization -->
                        <path d="M150,170 C150,180 130,190 110,190" stroke="#ff6b6b" stroke-width="1" stroke-dasharray="3,2"/>
                        <text x="85" y="190" text-anchor="middle" font-size="10" fill="currentColor">Vérifiez les</text>
                        <text x="85" y="200" text-anchor="middle" font-size="10" fill="currentColor">connexions</text>
                    </svg>
                `;
                return svgContainer;
            }
            
            function createBowlHeightIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <!-- Base -->
                        <rect x="100" y="150" width="100" height="20" rx="5" fill="#ddd" stroke="#666" stroke-width="2"/>
                        
                        <!-- Column -->
                        <rect x="140" y="80" width="20" height="70" fill="#ccc" stroke="#666" stroke-width="2"/>
                        
                        <!-- Head -->
                        <path d="M120,80 L180,80 L170,60 L130,60 Z" fill="#bbb" stroke="#666" stroke-width="2"/>
                        
                        <!-- Beater -->
                        <line x1="150" y1="80" x2="150" y2="130" stroke="#888" stroke-width="2"/>
                        <path d="M140,130 Q150,140 160,130" fill="none" stroke="#888" stroke-width="2"/>
                        <path d="M140,120 Q150,130 160,120" fill="none" stroke="#888" stroke-width="2"/>
                        
                        <!-- Bowl -->
                        <ellipse cx="150" cy="140" rx="35" ry="10" fill="#eee" stroke="#666" stroke-width="1"/>
                        <path d="M115,140 C115,125 125,110 150,110 C175,110 185,125 185,140" fill="none" stroke="#666" stroke-width="1"/>
                        
                        <!-- Gap indicator -->
                        <path d="M160,125 L170,115 L180,125" fill="none" stroke="#ff6b6b" stroke-width="2"/>
                        <text x="180" y="110" text-anchor="middle" font-size="10" fill="currentColor">Espace</text>
                        <text x="180" y="122" text-anchor="middle" font-size="10" fill="currentColor">trop grand</text>
                        
                        <!-- Adjustment screw -->
                        <circle cx="150" cy="170" r="8" fill="#aaa" stroke="#666"/>
                        <line x1="146" y1="166" x2="154" y2="174" stroke="#666" stroke-width="2"/>
                        <line x1="146" y1="174" x2="154" y2="166" stroke="#666" stroke-width="2"/>
                        
                        <!-- Adjustment indicator -->
                        <path d="M150,180 L150,185" stroke="#666" stroke-width="1"/>
                        <path d="M145,185 L155,185" stroke="#666" stroke-width="1"/>
                        <path d="M142,185 L142,190 L158,190 L158,185" stroke="#666" stroke-width="1" fill="none"/>
                        <text x="150" y="200" text-anchor="middle" font-size="10" fill="currentColor">Vis de réglage</text>
                    </svg>
                `;
                return svgContainer;
            }
            
            function createGenericIllustration() {
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = `
                    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md mx-auto">
                        <!-- KitchenAid mixer simplified -->
                        <rect x="125" y="150" width="50" height="20" rx="3" fill="#ddd" stroke="#666" stroke-width="2"/>
                        <rect x="140" y="80" width="20" height="70" fill="#ccc" stroke="#666" stroke-width="2"/>
                        <path d="M120,80 L180,80 L170,60 L130,60 Z" fill="#bbb" stroke="#666" stroke-width="2"/>
                        
                        <ellipse cx="150" cy="160" rx="30" ry="5" fill="#bbb" stroke="#666" stroke-width="1"/>
                        
                        <!-- Bowl -->
                        <ellipse cx="150" cy="140" rx="30" ry="8" fill="#eee" stroke="#666" stroke-width="1"/>
                        <path d="M120,140 C120,125 130,110 150,110 C170,110 180,125 180,140" fill="none" stroke="#666" stroke-width="1"/>
                        
                        <!-- Warning symbols -->
                        <circle cx="100" cy="100" r="15" fill="#ff6b6b" stroke="#333"/>
                        <text x="100" y="105" text-anchor="middle" font-size="15" fill="white" font-weight="bold">!</text>
                        
                        <circle cx="200" cy="100" r="15" fill="#ff6b6b" stroke="#333"/>
                        <text x="200" y="105" text-anchor="middle" font-size="15" fill="white" font-weight="bold">?</text>
                        
                        <!-- Service icon -->
                        <circle cx="150" cy="30" r="15" fill="#5D5CDE" stroke="#333"/>
                        <path d="M145,30 L155,30 M150,25 L150,35" stroke="white" stroke-width="2"/>
                        <path d="M143,23 L157,37 M143,37 L157,23" stroke="white" stroke-width="1"/>
                        
                        <!-- Text -->
                        <text x="150" y="180" text-anchor="middle" font-size="12" fill="currentColor">Contactez le service client</text>
                        <text x="150" y="195" text-anchor="middle" font-size="12" fill="currentColor">pour une assistance spécialisée</text>
                    </svg>
                `;
                return svgContainer;
            }
            
            // AI Assistant functionality
            const stepAiAssistant = document.getElementById('step-ai-assistant');
            const aiAssistantForm = document.getElementById('ai-assistant-form');
            const aiQuestion = document.getElementById('ai-question');
            const aiResponse = document.getElementById('ai-response');
            const aiResponseContainer = document.getElementById('ai-response-container');
            const aiLoading = document.getElementById('ai-loading');
            const aiError = document.getElementById('ai-error');
            const backFromAiBtn = document.getElementById('back-from-ai');
            const clearAiResponseBtn = document.getElementById('clear-ai-response');
            
            // Debugging to verify UI elements
            console.log('AI Assistant Elements:', {
                form: !!aiAssistantForm,
                question: !!aiQuestion,
                response: !!aiResponse,
                container: !!aiResponseContainer,
                loading: !!aiLoading,
                error: !!aiError,
                backButton: !!backFromAiBtn,
                clearButton: !!clearAiResponseBtn,
                stepAiAssistant: !!stepAiAssistant
            });
            
            // Show AI Assistant section with improved error checking
            const showAiAssistant = () => {
                console.log('Showing AI Assistant');
                // First verify the element exists
                if (!stepAiAssistant) {
                    console.error("Élément 'step-ai-assistant' non trouvé");
                    return; // Stop execution if element doesn't exist
                }
                
                // Hide all other sections
                stepDiagnosis.classList.add('hidden');
                stepModel.classList.add('hidden');
                stepSymptoms.classList.add('hidden');
                stepFaq.classList.add('hidden');
                stepHelp.classList.add('hidden');
                
                // Show AI assistant
                stepAiAssistant.classList.remove('hidden');
                
                // Force focus on question input for better UX
                if (aiQuestion) {
                    setTimeout(() => aiQuestion.focus(), 100);
                }
            };
            
            // Add AI button to diagnosis view
            const aiDiagnosisButton = document.createElement('button');
            aiDiagnosisButton.className = 'btn-secondary px-6 py-2 rounded-lg ml-4';
            aiDiagnosisButton.textContent = 'Poser une question';
            aiDiagnosisButton.addEventListener('click', function(e) {
                e.preventDefault();
                showAiAssistant();
            });
            
            // Add the button to the diagnosis actions with null check
            const diagnosisActions = document.querySelector('#step-diagnosis .mt-6');
            if (diagnosisActions) {
                diagnosisActions.appendChild(aiDiagnosisButton);
                console.log('Added AI button to diagnosis view');
            } else {
                console.error("Élément '.mt-6' non trouvé dans #step-diagnosis");
            }
            
            // Add AI option to model selection screen
            const aiModelButton = document.createElement('button');
            aiModelButton.className = 'inline-flex items-center px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 ml-4';
            aiModelButton.innerHTML = `
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                </svg>
                Assistant IA
            `;
            aiModelButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation(); // Prevent event propagation to parent elements
                showAiAssistant();
            });
            
            const modelHeader = document.querySelector('#step-model .mb-6.text-center');
            if (modelHeader) {
                modelHeader.appendChild(aiModelButton);
                console.log('Added AI button to model selection view');
            } else {
                console.error("Élément '.mb-6.text-center' non trouvé dans #step-model");
            }
            
            // Handle form submission with improved error handling
            if (aiAssistantForm) {
                aiAssistantForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const question = aiQuestion?.value.trim() || "";
                    if (!question) {
                        console.log('Empty question, not submitting');
                        return;
                    }
                    
                    console.log('Submitting question:', question);
                    
                    // Check if Poe API is available
                    if (!window.Poe || typeof window.Poe.sendUserMessage !== 'function') {
                        console.error('Poe API not available');
                        if (aiLoading) aiLoading.classList.add('hidden');
                        if (aiError) {
                            aiError.classList.remove('hidden');
                            const errorText = aiError.querySelector('p');
                            if (errorText) {
                                errorText.textContent = "L'API Poe n'est pas disponible. Veuillez rafraîchir la page et réessayer.";
                            }
                        }
                        return;
                    }
                    
                    // Show loading, hide results and errors
                    if (aiLoading) aiLoading.classList.remove('hidden');
                    if (aiResponseContainer) aiResponseContainer.classList.add('hidden');
                    if (aiError) aiError.classList.add('hidden');
                    
                    // Prepare a model-specific prompt if a model was selected
                    let contextPrefix = "";
                    if (selectedModel) {
                        contextPrefix = `Je possède un robot KitchenAid modèle ${selectedModel}. `;
                    }
                    
                    // If symptoms are selected, add them to the context
                    if (selectedSymptoms.length > 0) {
                        const symptomLabels = {
                            'bruit-anormal': 'bruits anormaux (grincements, cliquetis)',
                            'ne-demarre-pas': 'le robot ne démarre pas',
                            'tete-instable': 'la tête du robot est instable ou tombe',
                            'accessoire-ne-tourne-pas': "l'accessoire ne tourne pas correctement",
                            'surchauffe': 'surchauffe du moteur',
                            'fuite-huile': "fuite d'huile",
                            'vitesse-irreguliere': 'vitesse irrégulière',
                            'melange-inadequat': 'mélange inadéquat (ne mélange pas tous les ingrédients)'
                        };
                        
                        const symptomTexts = selectedSymptoms.map(s => symptomLabels[s] || s);
                        contextPrefix += `J'observe les symptômes suivants : ${symptomTexts.join(', ')}. `;
                    }
                    
                    console.log('Context prefix:', contextPrefix);
                    
                    // Register handler for AI responses
                    const handlerId = 'kitchenaid-assistant-handler-' + Date.now();
                    
                    window.Poe.registerHandler(handlerId, (result) => {
                        console.log('Received handler response:', result);
                        
                        if (!result.responses || result.responses.length === 0) {
                            console.error('Empty responses array');
                            if (aiLoading) aiLoading.classList.add('hidden');
                            if (aiError) {
                                aiError.classList.remove('hidden');
                                const errorText = aiError.querySelector('p');
                                if (errorText) {
                                    errorText.textContent = "Réponse invalide reçue du service. Veuillez réessayer.";
                                }
                            }
                            return;
                        }
                        
                        const message = result.responses[0];
                        console.log('Message status:', message.status);
                        
                        if (message.status === "error") {
                            if (aiLoading) aiLoading.classList.add('hidden');
                            if (aiError) {
                                aiError.classList.remove('hidden');
                                const errorText = aiError.querySelector('p');
                                if (errorText) {
                                    errorText.textContent = message.statusText || "Une erreur est survenue. Veuillez réessayer ou reformuler votre question.";
                                }
                            }
                        } else {
                            // Show content container if it's hidden
                            if (aiResponseContainer && aiResponseContainer.classList.contains('hidden')) {
                                aiResponseContainer.classList.remove('hidden');
                            }
                            
                            // Update the response content
                            if (aiResponse) {
                                aiResponse.innerHTML = message.content;
                            }
                            
                            // Hide loading when complete
                            if (message.status === "complete" && aiLoading) {
                                aiLoading.classList.add('hidden');
                            }
                        }
                    });
                    
                    try {
                        console.log('Sending message to Claude-3.7-Sonnet');
                        // Send message to Claude with context about the KitchenAid model and symptoms
                        await window.Poe.sendUserMessage(
                            `@Claude-3.7-Sonnet ${contextPrefix}${question}`,
                            {
                                handler: handlerId,
                                stream: true,
                                openChat: false
                            }
                        );
                        console.log('Message sent successfully');
                    } catch (error) {
                        console.error("Error sending message:", error);
                        if (aiLoading) aiLoading.classList.add('hidden');
                        if (aiError) {
                            aiError.classList.remove('hidden');
                            const errorText = aiError.querySelector('p');
                            if (errorText) {
                                errorText.textContent = `Erreur: ${error.message || "Impossible de contacter l'assistant IA."}`;
                            }
                        }
                    }
                });
            } else {
                console.error("Formulaire AI Assistant non trouvé");
            }
            
            // Fonction pour gérer l'indisponibilité de l'API Poe
            function handlePoeUnavailable() {
                console.log('Masquage des fonctionnalités d\'IA car l\'API Poe n\'est pas disponible');
                
                // Masquer le bouton d'IA sur l'écran de diagnostic s'il existe
                if (aiDiagnosisButton) {
                    aiDiagnosisButton.classList.add('hidden');
                }
                
                // Masquer le bouton d'IA sur l'écran de modèle s'il existe
                if (aiModelButton) {
                    aiModelButton.classList.add('hidden');
                }
                
                // Modifier la page d'assistant IA pour afficher un message explicatif
                if (stepAiAssistant) {
                    // Masquer le formulaire et les autres éléments de l'IA
                    if (aiAssistantForm) aiAssistantForm.classList.add('hidden');
                    if (aiResponseContainer) aiResponseContainer.classList.add('hidden');
                    if (aiLoading) aiLoading.classList.add('hidden');
                    
                    // Ajouter un message d'information à l'utilisateur
                    const aiNoticeDiv = document.createElement('div');
                    aiNoticeDiv.className = 'card p-6 mb-6 bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700';
                    aiNoticeDiv.innerHTML = `
                        <div class="flex items-start">
                            <div class="flex-shrink-0 mt-0.5">
                                <svg class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-lg font-medium text-yellow-800 dark:text-yellow-200">Fonctionnalité limitée</h3>
                                <div class="mt-2 text-yellow-700 dark:text-yellow-300">
                                    <p>L'assistant IA n'est pas disponible dans cet environnement.</p>
                                    <p class="mt-2">Cette fonctionnalité nécessite d'être exécutée dans l'environnement Poe. Pour utiliser l'assistant IA, veuillez ouvrir cette application sur la plateforme Poe.</p>
                                    <p class="mt-4 text-sm">Les fonctionnalités de diagnostic et la FAQ restent pleinement disponibles et fonctionnelles.</p>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    // Remplacer le formulaire par ce message
                    const formContainer = aiAssistantForm ? aiAssistantForm.parentNode : null;
                    if (formContainer) {
                        formContainer.insertBefore(aiNoticeDiv, aiAssistantForm);
                    } else if (stepAiAssistant.firstElementChild) {
                        // Si on ne trouve pas le parent du formulaire, on l'ajoute après le titre
                        stepAiAssistant.insertBefore(aiNoticeDiv, stepAiAssistant.firstElementChild.nextSibling);
                    }
                }
            }
            
            // Back button functionality with improved navigation
            if (backFromAiBtn) {
                backFromAiBtn.addEventListener('click', function() {
                    console.log('Back button clicked, selected model:', selectedModel);
                    
                    // Hide the AI assistant step
                    if (stepAiAssistant) stepAiAssistant.classList.add('hidden');
                    
                    // Determine which screen to show
                    if (selectedModel) {
                        // If we have a selected model, go back to the diagnosis screen
                        stepDiagnosis.classList.remove('hidden');
                    } else {
                        // Otherwise, go back to the model selection screen
                        stepModel.classList.remove('hidden');
                    }
                });
            } else {
                console.error("Bouton de retour non trouvé");
            }
            
            // Clear response button with improved feedback
            if (clearAiResponseBtn) {
                clearAiResponseBtn.addEventListener('click', function() {
                    console.log('Clearing AI response');
                    if (aiQuestion) {
                        aiQuestion.value = '';
                        aiQuestion.focus();
                    }
                    if (aiResponseContainer) aiResponseContainer.classList.add('hidden');
                    if (aiError) aiError.classList.add('hidden');
                });
            } else {
                console.error("Bouton d'effacement non trouvé");
            }
            
            // Initialize the app
            init();
        });
    </script>
</body>
</html>
